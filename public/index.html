renderCommunityLoadouts(loadouts = this.communityLoadouts) {
                const grid = document.getElementById('community-loadouts-grid');
                
                if (!loadouts.length) {
                    grid.innerHTML = '<div class="loading">No loadouts found</div>';
                    return;
                }
                
                grid.innerHTML = '';
                
                loadouts.forEach(loadout => {
                    const item = document.createElement('div');
                    item.className = 'community-item';
                    
                    // Create effectiveness radar chart data
                    const metrics = loadout.effectivenessMetrics || {};
                    const effectiveness = loadout.effectivenessScore || 0;
                    
                    item.innerHTML = `
                        <div class="community-item-header">
                            <div>
                                <h3>${loadout.title}</h3>
                                <div class="community-item-meta">
                                    By ${loadout.author} ‚Ä¢ ${new Date(loadout.uploadDate).toLocaleDateString()}
                                    ‚Ä¢ Category: ${loadout.category}
                                </div>
                            </div>
                            <div class="community-item-rating">
                                <div style="font-size: 0.8em; margin-bottom: 2px;">Effectiveness</div>
                                <div style="font-weight: bold; color: #64ffda;">${effectiveness.toFixed(1)}%</div>
                            </div>
                        </div>
                        
                        <div class="community-item-preview">
                            ${loadout.description}
                        </div>
                        
                        <div style="margin: 15px 0;">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; font-size: 0.8em;">
                                <div>Range: ${metrics.rangeCoverage || 0}%</div>
                                <div>Survival: ${metrics.survivability || 0}%</div>
                                <div>Utility: ${metrics.utility || 0}%</div>
                                <div>Flexibility: ${metrics.engagementFlexibility || 0}%</div>
                            </div>
                        </div>
                        
                        <div class="community-item-actions">
                            <button class="btn btn-primary btn-sm" onclick="editor.downloadCommunityLoadout('${loadout.id}')">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"/>
                                </svg>
                                Download (${loadout.downloads})
                            </button>
                            <button class="btn btn-success btn-sm" onclick="editor.rateCommunityLoadout('${loadout.id}', 1)">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M23,10C23,8.89 22.1,8 21,8H14.68L15.64,3.43C15.66,3.33 15.67,3.22 15.67,3.11C15.67,2.7 15.5,2.32 15.23,2.05L14.17,1L7.59,7.58C7.22,7.95 7,8.45 7,9V19A2,2 0 0,0 9,21H18C18.83,21 19.54,20.5 19.84,19.78L22.86,12.73C22.95,12.5 23,12.26 23,12V10.08L23,10M1,21H5V9H1V21Z"/>
                                </svg>
                                Like
                            </button>
                        </div>
                    `;
                    
                    grid.appendChild(item);
                });
            }

            filterCommunityLoadouts(category) {
                if (category === 'all') {
                    this.renderCommunityLoadouts();
                } else {
                    const filtered = this.communityLoadouts.filter(loadout => 
                        loadout.category === category
                    );
                    this.renderCommunityLoadouts(filtered);
                }
            }

            searchCommunityLoadouts(query) {
                if (!query.trim()) {
                    this.renderCommunityLoadouts();
                    return;
                }
                
                const filtered = this.communityLoadouts.filter(loadout => 
                    loadout.title.toLowerCase().includes(query.toLowerCase()) ||
                    loadout.description.toLowerCase().includes(query.toLowerCase()) ||
                    loadout.author.toLowerCase().includes(query.toLowerCase())
                );
                
                this.renderCommunityLoadouts(filtered);
            }

            async downloadCommunityLoadout(loadoutId) {
                try {
                    const response = await fetch(`${this.apiBaseUrl}/community/loadouts/${loadoutId}/download`, {
                        method: 'POST'
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        this.updateStatus(`${this.currentUploadType} uploaded successfully!`);
                        this.closeModal('community-upload-modal');
                        
                        // Refresh community data
                        if (this.currentUploadType === 'inventory') {
                            this.loadCommunityInventories();
                        } else {
                            this.loadCommunityLoadouts();
                        }
                    } else {
                        this.updateStatus(data.message || 'Failed to upload to community');
                    }
                    
                } catch (error) {
                    console.error('Error uploading to community:', error);
                    this.updateStatus('Failed to upload to community');
                }
            }

            // Utility Methods
            closeModal(modalId) {
                document.getElementById(modalId).style.display = 'none';
            }

            // Original methods from base editor
            bindExistingEvents() {
                // Preserve all original event bindings
                document.getElementById('add-item-btn').addEventListener('click', () => this.toggleAvailableItems());
                document.getElementById('clear-inventory').addEventListener('click', () => this.clearInventory());
                document.getElementById('backup-save').addEventListener('click', () => this.exportBackup());
                document.getElementById('restore-save').addEventListener('click', () => this.importBackup());
            
                // Search
                document.getElementById('search-items').addEventListener('input', (e) => {
                    this.currentFilter = e.target.value.toLowerCase();
                    this.renderInventory();
                    this.filterAvailableItems();
                });
            
                // Modal close events
                document.querySelectorAll('.close').forEach(closeBtn => {
                    closeBtn.addEventListener('click', (e) => {
                        const modal = e.target.closest('.modal');
                        if (modal) {
                            modal.style.display = 'none';
                        }
                    });
                });

                window.addEventListener('click', (e) => {
                    if (e.target.classList.contains('modal')) {
                        e.target.style.display = 'none';
                    }
                });

                // Currency input listeners
                ['aurum-value', 'kmarks-value', 'insurance-value'].forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.addEventListener('change', () => {
                            this.saveBalance();
                        });
                    }
                });

                // Game launcher events
                document.getElementById('launch-game-btn').addEventListener('click', () => this.launchGame());
                document.getElementById('configure-game-btn').addEventListener('click', () => this.configureGamePaths());
            
                // Check if game is configured on startup
                this.checkGameConfiguration();
            }

            async autoConnectAndLoad() {
                try {
                    await this.connectToDatabase();
                    await this.loadInventory();
                } catch (error) {
                    console.error('Auto-connect failed:', error);
                    this.updateStatus('Auto-connect failed - check connection');
                }
            }

            async connectToDatabase() {
                this.updateStatus('Connecting to MongoDB...');
                try {
                    const response = await fetch(`${this.apiBaseUrl}/connect`, {
                        method: 'POST'
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok && data.success) {
                        this.isConnected = true;
                        this.updateConnectionStatus(true);
                        this.updateStatus('Connected successfully');
                        console.log('Connection details:', data);
                    } else {
                        throw new Error(data.message || 'Failed to connect to database');
                    }
                } catch (error) {
                    console.error('Connection error:', error);
                    this.updateStatus(`Connection failed: ${error.message}`);
                    this.updateConnectionStatus(false);
                    throw error;
                }
            }

            async loadItemConfigs() {
                try {
                    console.log(`Loading item configs from: ${this.remoteConfigUrl}`);
                    const response = await fetch(this.remoteConfigUrl);
                    if (response.ok) {
                        const data = await response.json();
                        this.itemConfigs = data.itemConfigs || {};
                        this.rarityColors = data.rarityColors || {};
                        console.log(`‚úÖ Loaded ${Object.keys(this.itemConfigs).length} item configurations from remote`);
                    } else {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                } catch (error) {
                    console.error('Error loading remote item configs:', error);
                    this.createFallbackConfigs();
                }
            }

            async loadAvailableItems() {
                try {
                    console.log(`Loading available items from: ${this.remoteItemsUrl}`);
                    const response = await fetch(this.remoteItemsUrl);
                    if (response.ok) {
                        this.availableItems = await response.json();
                        this.updateStatus('Item database loaded from remote');
                        console.log(`‚úÖ Loaded ${this.availableItems.length} available items from remote`);
                    } else {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                } catch (error) {
                    console.error('Error loading remote available items:', error);
                    this.updateStatus('Warning: Could not load itemIds.json - using fallback data');
                    this.createFallbackItems();
                }
            }

            async loadInventory() {
                this.updateStatus('Loading inventory...');
                try {
                    const response = await fetch(`${this.apiBaseUrl}/inventory`);
                    if (response.ok) {
                        const data = await response.json();
                        
                        if (Array.isArray(data)) {
                            this.inventory = this.splitStacks(data);
                        } else if (data && Array.isArray(data.inventory)) {
                            this.inventory = this.splitStacks(data.inventory);
                        } else {
                            console.warn('Unexpected response format:', data);
                            this.inventory = [];
                        }
                        
                        this.renderInventory();
                        this.updateStatus(`Inventory loaded - ${this.inventory.length} items found`);
                        console.log('Loaded inventory:', this.inventory);

                        this.loadBalance().catch(err => console.warn('Balance loading failed:', err));

                    } else {
                        const errorData = await response.json().catch(() => ({ message: 'Unknown error' }));
                        throw new Error(errorData.message || 'Failed to load inventory');
                    }
                } catch (error) {
                    console.error('Load inventory error:', error);
                    this.updateStatus(`Load failed: ${error.message}`);
                    this.generateEmptyInventory();
                }
            }

            renderInventory() {
                const grid = document.getElementById('inventory-grid');
                grid.innerHTML = '';

                if (!Array.isArray(this.inventory)) {
                    console.warn('Inventory is not an array:', this.inventory);
                    this.inventory = [];
                }

                let filteredInventory = this.inventory.filter(item => {
                    if (!item || !item.baseItemId) return false;
                    
                    const config = this.getItemConfig(item.baseItemId);
                    const matchesCategory = this.selectedCategory === 'all' || config.category === this.selectedCategory;
                    const matchesSearch = !this.currentFilter || 
                        item.baseItemId.toLowerCase().includes(this.currentFilter) ||
                        config.displayName.toLowerCase().includes(this.currentFilter);
                    return matchesCategory && matchesSearch;
                });

                filteredInventory.forEach((item, index) => {
                    const slot = document.createElement('div');
                    slot.className = 'item-slot';
                    
                    const config = this.getItemConfig(item.baseItemId);
                    const iconPath = this.getItemIcon(item.baseItemId);
                    
                    slot.innerHTML = `
                        <div class="item-image rarity-${config.rarity}" style="background-image: url('${iconPath}')"></div>
                        <div class="item-name">${config.displayName}</div>
                        <div class="item-amount">${item.amount || 1}</div>
                    `;
                    
                    slot.addEventListener('click', () => this.showItemDetail(item, this.inventory.indexOf(item)));
                    grid.appendChild(slot);
                });
            }

            showItemDetail(item, index) {
                const modal = document.getElementById('item-detail-modal');
                const detailsDiv = document.getElementById('modal-item-details');
                
                const config = this.getItemConfig(item.baseItemId);
                const iconPath = this.getItemIcon(item.baseItemId);
                const showDurability = config.maxDurability > 0 && config.category !== 'weapons';
                const isWeapon = config.category === 'weapons' || item.baseItemId.includes('WP_');
                
                let durabilitySlider = '';
                if (showDurability) {
                    const currentDurability = item.durability === -1 ? config.maxDurability : item.durability;
                    durabilitySlider = `
                        <div class="durability-slider-container">
                            <label for="durability-slider">Durability: <span class="durability-value">${currentDurability}</span>/${config.maxDurability}</label>
                            <input type="range" id="durability-slider" class="durability-slider" 
                                   min="1" max="${config.maxDurability}" value="${currentDurability}"
                                   oninput="editor.updateDurabilityDisplay(this.value, ${config.maxDurability})">
                        </div>
                    `;
                }
                
                detailsDiv.innerHTML = `
                    <div class="item-detail-icon rarity-${config.rarity}" style="background-image: url('${iconPath}')"></div>
                    <h2 style="color: ${this.rarityColors[config.rarity] || '#64ffda'}; margin-bottom: 20px;">${config.displayName}</h2>
                    <p><strong>Base Item ID:</strong> ${item.baseItemId}</p>
                    <p><strong>Rarity:</strong> <span style="color: ${this.rarityColors[config.rarity] || '#64ffda'}">${config.rarity.charAt(0).toUpperCase() + config.rarity.slice(1)}</span></p>
                    <p><strong>Current Amount:</strong> ${item.amount || 1}</p>
                    ${showDurability ? `<p><strong>Durability:</strong> ${item.durability === -1 ? 'Full' : item.durability}</p>` : ''}
                    <div style="margin-top: 20px;">
                        <label for="edit-quantity">Edit Quantity:</label>
                        <input type="number" id="edit-quantity" class="quantity-input" value="${item.amount || 1}" min="0" max="999" style="margin: 0 10px;">
                        <button class="btn btn-success" onclick="editor.updateItemQuantity(${index}, document.getElementById('edit-quantity').value)">Update</button>
                        <button class="btn btn-danger" onclick="editor.removeItem(${index})" style="margin-left: 10px;">Remove</button>
                    </div>
                    ${durabilitySlider}
                `;
                
                modal.style.display = 'block';
                this.currentEditingItemIndex = index;
                
                // Show weapon attachment editor for weapons
                if (isWeapon) {
                    this.showWeaponAttachmentEditor(item, index);
                } else {
                    document.getElementById('attachment-editor').style.display = 'none';
                }
            }

            toggleAvailableItems() {
                const container = document.getElementById('available-items-container');
                const mainContent = document.getElementById('main-content');
                const isVisible = container.style.display !== 'none';
                
                container.style.display = isVisible ? 'none' : 'block';
                
                if (!isVisible) {
                    this.filterAvailableItems();
                    mainContent.classList.add('hide-scrollbar');
                } else {
                    mainContent.classList.remove('hide-scrollbar');
                }
            }

            filterAvailableItems() {
                const container = document.getElementById('available-items');
                container.innerHTML = '';
                        
                const uniqueItems = [];
                const seenIds = new Set();
                        
                this.availableItems.forEach(item => {
                    if (!seenIds.has(item.baseItemId) && this.itemConfigs[item.baseItemId]) {
                        uniqueItems.push(item);
                        seenIds.add(item.baseItemId);
                    }
                });
            
                let filteredItems = uniqueItems.filter(item => {
                    const config = this.getItemConfig(item.baseItemId);
                    const matchesCategory = this.selectedCategory === 'all' || config.category === this.selectedCategory;
                    const matchesSearch = !this.currentFilter || 
                        config.displayName.toLowerCase().includes(this.currentFilter) ||
                        item.baseItemId.toLowerCase().includes(this.currentFilter);
                    return matchesCategory && matchesSearch;
                });

                filteredItems.forEach(item => {
                    const config = this.getItemConfig(item.baseItemId);
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'community-item';
                    
                    const iconPath = this.getItemIcon(item.baseItemId);
                    
                    itemDiv.innerHTML = `
                        <div class="available-item-icon rarity-${config.rarity}" style="background-image: url('${iconPath}')"></div>
                        <div class="available-item-info">
                            <h4 class="rarity-${config.rarity}">${config.displayName}</h4>
                            <p style="color: ${this.rarityColors[config.rarity] || '#64ffda'}; font-size: 0.7em; text-transform: uppercase; margin-top: 3px;">${config.rarity}</p>
                        </div>
                        <div class="available-item-controls">
                            <input type="number" class="quantity-input" value="1" min="1" max="999">
                            <button class="btn btn-primary">Add</button>
                        </div>
                    `;
                    
                    const addButton = itemDiv.querySelector('.btn');
                    const quantityInput = itemDiv.querySelector('.quantity-input');
                    
                    addButton.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const quantity = parseInt(quantityInput.value) || 1;
                        
                        // Check if we're adding to loadout or inventory
                        if (this.currentLoadoutSlot) {
                            this.addItemToLoadout(item.baseItemId, quantity);
                        } else {
                            this.addItemToInventory(item.baseItemId, quantity);
                        }
                    });
                    
                    container.appendChild(itemDiv);
                });
            }

            addItemToInventory(baseItemId, quantity) {
                const amount = parseInt(quantity) || 1;
                const config = this.getItemConfig(baseItemId);
                const maxStack = config.maxStackSize || 50;

                let remainingAmount = amount;
                const existingStacks = this.inventory.filter(item => 
                    item.baseItemId === baseItemId && item.amount < maxStack
                );

                for (const existingItem of existingStacks) {
                    if (remainingAmount <= 0) break;
                    const canAdd = maxStack - existingItem.amount;
                    const toAdd = Math.min(remainingAmount, canAdd);
                    existingItem.amount += toAdd;
                    remainingAmount -= toAdd;
                }

                while (remainingAmount > 0) {
                    const stackAmount = Math.min(remainingAmount, maxStack);
                    this.inventory.push({
                        itemId: this.generateUUID(),
                        baseItemId: baseItemId,
                        primaryVanityId: 0,
                        secondaryVanityId: 0,
                        amount: stackAmount,
                        durability: config.maxDurability,
                        modData: { m: [] },
                        rolledPerks: [],
                        insurance: "",
                        insuranceOwnerPlayfabId: "",
                        insuredAttachmentId: "",
                        origin: { t: "", p: "", g: "" }
                    });
                    remainingAmount -= stackAmount;
                }
            
                this.renderInventory();
                this.autoSave();
                this.updateStatus(`Added ${amount}x ${config.displayName} to inventory`);
            }

            // Utility methods
            getItemConfig(baseItemId) {
                if (this.itemConfigs[baseItemId]) {
                    return this.itemConfigs[baseItemId];
                }
                return {
                    displayName: this.cleanDisplayName(baseItemId),
                    category: this.guessCategory(baseItemId),
                    rarity: 'common',
                    maxDurability: this.guessMaxDurability(baseItemId),
                    maxStackSize: this.guessMaxStackSize(baseItemId),
                    icon: this.getDefaultIcon(baseItemId),
                    attachment_type: this.guessAttachmentType(baseItemId),
                    attachment_weapon: []
                };
            }

            getItemIcon(baseItemId) {
                const config = this.getItemConfig(baseItemId);
                if (config.icon && config.icon !== this.getDefaultIcon(baseItemId)) {
                    return `${this.remoteIconsUrl}${config.icon}`;
                }
                return this.createPlaceholderIcon(baseItemId);
            }

            cleanDisplayName(name) {
                return name
                    .replace(/^(WP_[A-Z]_|TOOL_|Mod_|Consumable_)/g, '')
                    .replace(/_+/g, ' ')
                    .replace(/\b\w+/g, word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())
                    .replace(/\s+/g, ' ')
                    .trim();
            }

            guessCategory(baseItemId) {
                const id = baseItemId.toLowerCase();
                if (id.includes('wp_')) return 'weapons';
                if (id.includes('consumable')) return 'consumables';
                if (id.includes('shield') || id.includes('helmet')) return 'armor';
                if (id.includes('light') || id.includes('medium')) return 'ammo';
                if (id.includes('tool')) return 'tools';
                if (id.includes('mod_')) return 'attachments';
                return 'materials';
            }

            guessAttachmentType(baseItemId) {
                const id = baseItemId.toLowerCase();
                if (id.includes('optics')) return 'optics';
                if (id.includes('magazine')) return 'magazine';
                if (id.includes('muzzle')) return 'muzzle';
                if (id.includes('stock')) return 'stock';
                if (id.includes('grip')) return 'fore-grip';
                if (id.includes('tactical')) return 'tactical';
                return null;
            }

            generateUUID() {
                return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                    const r = Math.random() * 16 | 0;
                    const v = c === 'x' ? r : (r & 0x3 | 0x8);
                    return v.toString(16);
                });
            }

            updateStatus(message) {
                document.getElementById('status-text').textContent = message;
                console.log(message);
            }

            updateConnectionStatus(connected) {
                const indicator = document.getElementById('connection-indicator');
                const text = document.getElementById('connection-text');
                
                if (connected) {
                    indicator.classList.add('connected');
                    text.textContent = 'Connected';
                } else {
                    indicator.classList.remove('connected');
                    text.textContent = 'Disconnected';
                }
            }

            async saveInventory() {
                if (!this.isConnected) return;
                try {
                    const response = await fetch(`${this.apiBaseUrl}/inventory`, {
                        method: 'PUT',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(this.inventory)
                    });
                    const data = await response.json();
                    if (response.ok && data.success) {
                        console.log('Auto-saved inventory');
                    }
                } catch (error) {
                    console.error('Save inventory error:', error);
                }
            }

            autoSave() {
                if (this.autoSaveTimeout) {
                    clearTimeout(this.autoSaveTimeout);
                }
                this.autoSaveTimeout = setTimeout(() => {
                    this.saveInventory();
                }, 1000);
            }

            async loadBalance() {
                try {
                    const response = await fetch(`${this.apiBaseUrl}/balance`);
                    if (response.ok) {
                        const balance = await response.json();
                        document.getElementById('aurum-value').value = balance.AU || 0;
                        document.getElementById('kmarks-value').value = balance.SC || 0;
                        document.getElementById('insurance-value').value = balance.IN || 0;
                    }
                } catch (error) {
                    console.error('Error loading balance:', error);
                }
            }

            async saveBalance() {
                try {
                    const balance = {
                        AU: parseInt(document.getElementById('aurum-value').value) || 0,
                        SC: parseInt(document.getElementById('kmarks-value').value) || 0,
                        IN: parseInt(document.getElementById('insurance-value').value) || 0
                    };
                    await fetch(`${this.apiBaseUrl}/balance`, {
                        method: 'PUT',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(balance)
                    });
                } catch (error) {
                    console.error('Error saving balance:', error);
                }
            }

            // Initialize window controls and other methods
            initializeWindowControls() {
                if (window.electronAPI && window.electronAPI.windowMinimize) {
                    const controlsContainer = document.getElementById('title-bar-controls');
                    controlsContainer.innerHTML = `
                        <button class="title-bar-button minimize" onclick="window.electronAPI.windowMinimize()">‚àí</button>
                        <button class="title-bar-button maximize" onclick="window.electronAPI.windowMaximize()">‚ñ°</button>
                        <button class="title-bar-button close" onclick="window.electronAPI.windowClose()">√ó</button>
                    `;
                } else {
                    document.querySelector('.custom-title-bar').style.display = 'none';
                    document.querySelector('.container').style.paddingTop = '0';
                    document.querySelector('.sidebar').style.top = '0';
                    document.querySelector('.sidebar').style.height = '100vh';
                }
            }

            initializeUpdateChecker() {
                if (window.electronAPI) {
                    document.getElementById('update-section').style.display = 'block';
                    document.getElementById('check-updates-btn').addEventListener('click', () => {
                        window.electronAPI.checkForUpdates();
                    });
                }
            }

            createFallbackConfigs() {
                this.itemConfigs = {};
                this.rarityColors = {
                    common: '#9e9e9e',
                    uncommon: '#4caf50',
                    rare: '#2196f3',
                    epic: '#9c27b0',
                    exotic: '#ff4e4e',
                    legendary: '#ff9800'
                };
            }

            createFallbackItems() {
                this.availableItems = [
                    { baseItemId: "Consumable_Health_01" },
                    { baseItemId: "Shield_01" },
                    { baseItemId: "WP_E_AR_Energy_01" }
                ];
            }

            // Additional utility methods
            guessMaxDurability(baseItemId) {
                const id = baseItemId.toLowerCase();
                if (id.includes('wp_')) return 1000;
                if (id.includes('helmet')) return 600;
                if (id.includes('shield')) return 500;
                return -1;
            }

            guessMaxStackSize(baseItemId) {
                const id = baseItemId.toLowerCase();
                if (id.includes('consumable')) return 5;
                if (id.includes('ammo')) return 250;
                if (id.includes('wp_') || id.includes('helmet')) return 1;
                return 20;
            }

            getDefaultIcon(baseItemId) {
                return `${baseItemId.substring(0, 8)}.png`;
            }

            createPlaceholderIcon(baseItemId) {
                return `data:image/svg+xml;base64,${btoa(`
                    <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60">
                        <rect width="60" height="60" fill="#4a5568"/>
                        <text x="30" y="30" text-anchor="middle" fill="#e0e0e0" font-family="Arial" font-size="6">
                            ${baseItemId.substring(0, 10)}
                        </text>
                    </svg>
                `)}`;
            }

            splitStacks(inventory) {
                const newInventory = [];
                inventory.forEach(item => {
                    const config = this.getItemConfig(item.baseItemId);
                    const maxStack = config.maxStackSize || 50;
                    
                    if (item.amount <= maxStack) {
                        newInventory.push(item);
                    } else {
                        let remainingAmount = item.amount;
                        while (remainingAmount > 0) {
                            const stackAmount = Math.min(remainingAmount, maxStack);
                            newInventory.push({
                                ...item,
                                itemId: this.generateUUID(),
                                amount: stackAmount
                            });
                            remainingAmount -= stackAmount;
                        }
                    }
                });
                return newInventory;
            }

            generateEmptyInventory() {
                this.inventory = [];
                this.renderInventory();
            }

            // Placeholder methods for game launcher and other features
            async checkGameConfiguration() {}
            async launchGame() {}
            async configureGamePaths() {}
            clearInventory() {}
            exportBackup() {}
            importBackup() {}
            updateItemQuantity() {}
            removeItem() {}
            updateDurabilityDisplay() {}
        }

        // Initialize the enhanced editor
        const editor = new CycleRebornCommunityEditor();

        // Console welcome message
        console.log(`
üéÆ The Cycle: Reborn Save Editor - Community Edition
üåê Community Features: Inventories, Loadouts, Faction Editor
üîß Weapon Attachment Editor
‚öîÔ∏è Advanced Loadout System
üéØ GitHub Integration
üöÄ Auto-Updater Enabled

Features:
- Community inventory sharing
- Advanced loadout editor
- Weapon attachment system
- Faction level editor
- GitHub authentication
- Auto-save functionality

Commands:
- Ctrl+U: Check for updates
- F12: Developer tools
- Ctrl+R: Reload page

Repository: https://github.com/lxjo101/TheCycleRebornEditor
        `);
    </script>
</body>
</html> await response.json();
                    
                    if (data.success) {
                        // Add all loadout items to inventory
                        const loadoutData = data.loadout;
                        const itemsAdded = [];
                        
                        Object.values(loadoutData.slots || {}).forEach(slot => {
                            if (slot && slot.baseItemId) {
                                const item = {
                                    itemId: this.generateUUID(),
                                    baseItemId: slot.baseItemId,
                                    amount: slot.amount || 1,
                                    durability: -1,
                                    modData: { m: [] }
                                };
                                this.inventory.push(item);
                                itemsAdded.push(item);
                            }
                        });
                        
                        this.renderInventory();
                        this.autoSave();
                        this.updateStatus(`Downloaded loadout - added ${itemsAdded.length} items to inventory`);
                        
                        // Update download count
                        this.loadCommunityLoadouts();
                    } else {
                        this.updateStatus(data.message || 'Failed to download loadout');
                    }
                } catch (error) {
                    console.error('Error downloading community loadout:', error);
                    this.updateStatus('Failed to download loadout');
                }
            }

            async rateCommunityLoadout(loadoutId, rating) {
                if (!this.isAuthenticated) {
                    this.updateStatus('Please login to rate loadouts');
                    return;
                }
                
                try {
                    const response = await fetch(`${this.apiBaseUrl}/community/loadouts/${loadoutId}/rate`, {
                        method: 'POST',
                        headers: { 
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${this.sessionToken}`
                        },
                        body: JSON.stringify({ rating })
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        this.updateStatus('Rating submitted successfully');
                        this.loadCommunityLoadouts();
                    } else {
                        this.updateStatus(data.message || 'Failed to submit rating');
                    }
                } catch (error) {
                    console.error('Error rating loadout:', error);
                    this.updateStatus('Failed to submit rating');
                }
            }

            // Loadout Editor System
            initializeLoadoutEditor() {
                this.renderCurrentLoadout();
                this.bindLoadoutEvents();
            }

            bindLoadoutEvents() {
                // Loadout tabs
                document.querySelectorAll('.loadout-tab').forEach(tab => {
                    tab.addEventListener('click', (e) => {
                        const loadoutId = e.target.dataset.loadout;
                        if (loadoutId === 'new') {
                            this.createNewLoadout();
                        } else {
                            this.switchLoadout(parseInt(loadoutId));
                        }
                    });
                });
                
                // Loadout slots
                document.querySelectorAll('.loadout-slot').forEach(slot => {
                    slot.addEventListener('click', (e) => {
                        const slotType = e.currentTarget.dataset.slot;
                        if (slotType) {
                            this.openLoadoutItemSelection(slotType);
                        }
                    });
                });
                
                // Loadout controls
                document.getElementById('save-loadout-btn').addEventListener('click', () => this.saveCurrentLoadout());
                document.getElementById('add-items-to-loadout-btn').addEventListener('click', () => this.addItemsToLoadout());
                document.getElementById('clear-loadout-btn').addEventListener('click', () => this.clearCurrentLoadout());
                
                // Loadout name and category changes
                document.getElementById('loadout-name').addEventListener('change', (e) => {
                    this.loadouts[this.currentLoadout].name = e.target.value;
                    this.updateLoadoutTab();
                });
                
                document.getElementById('loadout-category').addEventListener('change', (e) => {
                    this.loadouts[this.currentLoadout].category = e.target.value;
                });
            }

            renderCurrentLoadout() {
                const loadout = this.loadouts[this.currentLoadout];
                
                // Update form fields
                document.getElementById('loadout-name').value = loadout.name;
                document.getElementById('loadout-category').value = loadout.category;
                
                // Clear all slots first
                document.querySelectorAll('.loadout-slot').forEach(slot => {
                    slot.classList.add('empty');
                    const slotType = slot.dataset.slot;
                    slot.innerHTML = `
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z"/>
                        </svg>
                        ${slotType.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())}
                    `;
                });
                
                // Update slot displays with items
                Object.keys(loadout.slots || {}).forEach(slotType => {
                    const slot = document.querySelector(`[data-slot="${slotType}"]`);
                    const item = loadout.slots[slotType];
                    
                    if (slot && item) {
                        const config = this.getItemConfig(item.baseItemId);
                        const iconPath = this.getItemIcon(item.baseItemId);
                        
                        slot.classList.remove('empty');
                        slot.innerHTML = `
                            <div class="loadout-slot-icon" style="background-image: url('${iconPath}')"></div>
                            <div class="loadout-slot-info">
                                <h4>${config.displayName}</h4>
                                <p>Amount: ${item.amount || 1}</p>
                            </div>
                        `;
                    }
                });
            }

            switchLoadout(loadoutId) {
                this.currentLoadout = loadoutId;
                
                // Update active tab
                document.querySelectorAll('.loadout-tab').forEach(tab => {
                    tab.classList.remove('active');
                    if (parseInt(tab.dataset.loadout) === loadoutId) {
                        tab.classList.add('active');
                    }
                });
                
                this.renderCurrentLoadout();
            }

            createNewLoadout() {
                const newId = Object.keys(this.loadouts).length + 1;
                this.loadouts[newId] = {
                    name: `Loadout ${newId}`,
                    category: 'stealth',
                    slots: {},
                    attachments: {}
                };
                
                // Add new tab
                const tabsContainer = document.querySelector('.loadout-tabs');
                const newTab = document.createElement('div');
                newTab.className = 'loadout-tab';
                newTab.dataset.loadout = newId;
                newTab.textContent = `Loadout ${newId}`;
                
                // Insert before the "New" button
                const newButton = document.querySelector('[data-loadout="new"]');
                tabsContainer.insertBefore(newTab, newButton);
                
                this.switchLoadout(newId);
            }

            updateLoadoutTab() {
                const activeTab = document.querySelector('.loadout-tab.active');
                if (activeTab) {
                    activeTab.textContent = this.loadouts[this.currentLoadout].name;
                }
            }

            openLoadoutItemSelection(slotType) {
                this.currentLoadoutSlot = slotType;
                document.getElementById('available-items-container').style.display = 'block';
                this.filterAvailableItems();
            }

            addItemToLoadout(baseItemId, quantity = 1) {
                if (!this.currentLoadoutSlot) return;
                
                const loadout = this.loadouts[this.currentLoadout];
                loadout.slots[this.currentLoadoutSlot] = {
                    baseItemId: baseItemId,
                    amount: quantity
                };
                
                this.renderCurrentLoadout();
                this.currentLoadoutSlot = null;
                document.getElementById('available-items-container').style.display = 'none';
            }

            saveCurrentLoadout() {
                const loadout = this.loadouts[this.currentLoadout];
                localStorage.setItem('cycleRebornLoadouts', JSON.stringify(this.loadouts));
                this.updateStatus(`Saved ${loadout.name}`);
            }

            addItemsToLoadout() {
                document.getElementById('available-items-container').style.display = 'block';
                this.filterAvailableItems();
            }

            clearCurrentLoadout() {
                this.loadouts[this.currentLoadout].slots = {};
                this.renderCurrentLoadout();
                this.updateStatus('Loadout cleared');
            }

            // Weapon Attachment Editor
            showWeaponAttachmentEditor(weaponItem, itemIndex) {
                this.currentEditingWeapon = { item: weaponItem, index: itemIndex };
                
                const editor = document.getElementById('attachment-editor');
                const config = this.getItemConfig(weaponItem.baseItemId);
                
                // Check if it's a marksman weapon to hide muzzle slot
                const isMarksman = config.category === 'marksman' || weaponItem.baseItemId.includes('Marksman');
                const muzzleSlot = document.getElementById('muzzle-slot');
                if (muzzleSlot) {
                    muzzleSlot.style.display = isMarksman ? 'none' : 'block';
                }
                
                // Load current attachments
                this.loadWeaponAttachments(weaponItem);
                
                editor.style.display = 'block';
                this.bindAttachmentEvents();
            }

            bindAttachmentEvents() {
                // Attachment slot clicks
                document.querySelectorAll('.attachment-slot').forEach(slot => {
                    slot.addEventListener('click', (e) => {
                        const attachmentType = e.currentTarget.dataset.attachmentType;
                        if (attachmentType) {
                            this.openAttachmentSelection(attachmentType);
                        }
                    });
                });
                
                // Preset management
                document.getElementById('load-preset-btn').addEventListener('click', () => this.loadAttachmentPreset());
                document.getElementById('save-preset-btn').addEventListener('click', () => this.saveAttachmentPreset());
            }

            loadWeaponAttachments(weaponItem) {
                // Clear all slots first
                document.querySelectorAll('.attachment-slot').forEach(slot => {
                    slot.classList.add('empty');
                    slot.querySelector('.attachment-slot-icon').style.backgroundImage = '';
                    slot.querySelector('.attachment-slot-name').textContent = 'Empty';
                });
                
                // Parse weapon's modData to show current attachments
                const modData = weaponItem.modData || { m: [] };
                
                modData.m.forEach(attachment => {
                    const attachmentConfig = this.getItemConfig(attachment.baseItemId);
                    const slot = document.querySelector(`[data-attachment-type="${attachmentConfig.attachment_type}"]`);
                    
                    if (slot) {
                        const iconPath = this.getItemIcon(attachment.baseItemId);
                        slot.classList.remove('empty');
                        slot.querySelector('.attachment-slot-icon').style.backgroundImage = `url('${iconPath}')`;
                        slot.querySelector('.attachment-slot-name').textContent = attachmentConfig.displayName;
                    }
                });
            }

            async openAttachmentSelection(attachmentType) {
                this.currentAttachmentType = attachmentType;
                
                try {
                    const response = await fetch(`${this.apiBaseUrl}/attachments/compatible/${this.currentEditingWeapon.item.baseItemId}?attachmentType=${attachmentType}`);
                    const data = await response.json();
                    
                    if (data.success) {
                        this.renderAttachmentSelection(data.attachments);
                        
                        const modal = document.getElementById('attachment-selection-modal');
                        modal.style.display = 'block';
                    } else {
                        this.updateStatus('Failed to load compatible attachments');
                    }
                } catch (error) {
                    console.error('Error loading attachments:', error);
                    this.updateStatus('Failed to load attachments');
                }
            }

            renderAttachmentSelection(attachments) {
                const grid = document.getElementById('attachment-selection-grid');
                const title = document.getElementById('attachment-selection-title');
                
                title.textContent = `Select ${this.currentAttachmentType.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())}`;
                
                grid.innerHTML = '';
                
                attachments.forEach(attachment => {
                    const config = this.getItemConfig(attachment.baseItemId);
                    const iconPath = this.getItemIcon(attachment.baseItemId);
                    
                    const item = document.createElement('div');
                    item.className = 'community-item';
                    item.innerHTML = `
                        <div class="available-item-icon rarity-${config.rarity}" style="background-image: url('${iconPath}')"></div>
                        <div class="available-item-info">
                            <h4 class="rarity-${config.rarity}">${config.displayName}</h4>
                            <p style="color: ${this.rarityColors[config.rarity] || '#64ffda'}; font-size: 0.7em; text-transform: uppercase;">${config.rarity}</p>
                        </div>
                        <div class="available-item-controls">
                            <button class="btn btn-primary" onclick="editor.attachToWeapon('${attachment.baseItemId}')">Attach</button>
                        </div>
                    `;
                    
                    grid.appendChild(item);
                });
            }

            attachToWeapon(attachmentId) {
                if (!this.currentEditingWeapon || !this.currentAttachmentType) return;
                
                const weapon = this.currentEditingWeapon.item;
                
                // Initialize modData if it doesn't exist
                if (!weapon.modData) {
                    weapon.modData = { m: [] };
                }
                
                // Remove existing attachment of same type
                weapon.modData.m = weapon.modData.m.filter(att => {
                    const config = this.getItemConfig(att.baseItemId);
                    return config.attachment_type !== this.currentAttachmentType;
                });
                
                // Add new attachment
                weapon.modData.m.push({
                    baseItemId: attachmentId,
                    amount: 1
                });
                
                // Update weapon in inventory
                this.inventory[this.currentEditingWeapon.index] = weapon;
                
                // Refresh displays
                this.loadWeaponAttachments(weapon);
                this.closeModal('attachment-selection-modal');
                this.autoSave();
                
                const config = this.getItemConfig(attachmentId);
                this.updateStatus(`Attached ${config.displayName} to weapon`);
            }

            async loadAttachmentPreset() {
                const presetName = document.getElementById('attachment-preset-select').value;
                if (!presetName || !this.currentEditingWeapon) return;
                
                // Mock preset loading - in real implementation, load from server
                const mockPresets = {
                    'cqb': ['Mod_optics_Holo_01', 'Mod_magazine_Fast_01', 'Mod_muzzle_Flash_01'],
                    'ranged': ['Mod_optics_4x_01', 'Mod_magazine_Extended_01', 'Mod_muzzle_Compensator_01'],
                    'stealth': ['Mod_optics_Reflex_01', 'Mod_magazine_Quiet_01', 'Mod_muzzle_Suppressor_01']
                };
                
                const preset = mockPresets[presetName];
                if (preset) {
                    preset.forEach(attachmentId => {
                        this.attachToWeapon(attachmentId);
                    });
                    this.updateStatus(`Loaded ${presetName} preset`);
                }
            }

            async saveAttachmentPreset() {
                if (!this.currentEditingWeapon || !this.isAuthenticated) return;
                
                const presetName = prompt('Enter preset name:');
                if (!presetName) return;
                
                const weapon = this.currentEditingWeapon.item;
                const attachments = {};
                
                (weapon.modData?.m || []).forEach(att => {
                    const config = this.getItemConfig(att.baseItemId);
                    attachments[config.attachment_type] = att.baseItemId;
                });
                
                try {
                    const response = await fetch(`${this.apiBaseUrl}/attachments/presets`, {
                        method: 'POST',
                        headers: { 
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${this.sessionToken}`
                        },
                        body: JSON.stringify({
                            weaponId: weapon.baseItemId,
                            presetName,
                            attachments
                        })
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        this.updateStatus(`Saved preset: ${presetName}`);
                    } else {
                        this.updateStatus('Failed to save preset');
                    }
                } catch (error) {
                    console.error('Error saving preset:', error);
                    this.updateStatus('Failed to save preset');
                }
            }

            // Faction Editor System
            initializeFactionEditor() {
                this.loadFactionLevels();
                this.bindFactionEvents();
            }

            bindFactionEvents() {
                // Faction sliders and inputs
                ['ica', 'korolev', 'osiris'].forEach(faction => {
                    const slider = document.getElementById(`${faction}-slider`);
                    const input = document.getElementById(`${faction}-input`);
                    const display = document.getElementById(`${faction}-level-display`);
                    
                    slider.addEventListener('input', (e) => {
                        const value = parseInt(e.target.value);
                        input.value = value;
                        display.textContent = `Level ${value}`;
                        this.factionLevels[faction] = value;
                    });
                    
                    input.addEventListener('change', (e) => {
                        const value = Math.max(0, Math.min(100, parseInt(e.target.value) || 0));
                        slider.value = value;
                        display.textContent = `Level ${value}`;
                        this.factionLevels[faction] = value;
                    });
                });
                
                // Save button
                document.getElementById('save-factions-btn').addEventListener('click', () => this.saveFactionLevels());
            }

            async loadFactionLevels() {
                try {
                    const response = await fetch(`${this.apiBaseUrl}/factions`);
                    const data = await response.json();
                    
                    if (data.success) {
                        this.factionLevels = data.factions;
                    }
                } catch (error) {
                    console.error('Error loading faction levels:', error);
                }
                
                // Update UI
                Object.keys(this.factionLevels).forEach(faction => {
                    const level = this.factionLevels[faction];
                    const slider = document.getElementById(`${faction}-slider`);
                    const input = document.getElementById(`${faction}-input`);
                    const display = document.getElementById(`${faction}-level-display`);
                    
                    if (slider && input && display) {
                        slider.value = level;
                        input.value = level;
                        display.textContent = `Level ${level}`;
                    }
                });
            }

            async saveFactionLevels() {
                try {
                    this.updateStatus('Saving faction levels...');
                    
                    const response = await fetch(`${this.apiBaseUrl}/factions`, {
                        method: 'PUT',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(this.factionLevels)
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        this.updateStatus('Faction levels saved successfully');
                    } else {
                        this.updateStatus(data.message || 'Failed to save faction levels');
                    }
                } catch (error) {
                    console.error('Error saving faction levels:', error);
                    this.updateStatus('Failed to save faction levels');
                }
            }

            // Community Upload System
            showUploadModal(type) {
                if (!this.isAuthenticated) {
                    this.updateStatus('Please login to upload to community');
                    return;
                }
                
                const modal = document.getElementById('community-upload-modal');
                const title = document.getElementById('upload-modal-title');
                
                title.textContent = type === 'inventory' ? 'Upload Inventory' : 'Upload Loadout';
                this.currentUploadType = type;
                
                // Reset form
                document.getElementById('community-upload-form').reset();
                this.clearSelectedTags();
                
                modal.style.display = 'block';
                this.bindUploadEvents();
            }

            bindUploadEvents() {
                // Tag input
                const tagInput = document.getElementById('tag-input');
                const tagContainer = document.getElementById('tag-input-container');
                const suggestions = document.getElementById('tag-suggestions');
                
                tagInput.addEventListener('input', (e) => {
                    const value = e.target.value.toLowerCase();
                    if (value.length > 0) {
                        const matching = this.availableTags.filter(tag => 
                            tag.includes(value) && !this.getSelectedTags().includes(tag)
                        );
                        this.showTagSuggestions(matching);
                    } else {
                        suggestions.style.display = 'none';
                    }
                });
                
                tagInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ',') {
                        e.preventDefault();
                        this.addTag(e.target.value.trim());
                        e.target.value = '';
                    }
                });
                
                tagContainer.addEventListener('click', () => tagInput.focus());
                
                // Form submission
                document.getElementById('community-upload-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.submitCommunityUpload();
                });
                
                document.getElementById('cancel-upload-btn').addEventListener('click', () => {
                    this.closeModal('community-upload-modal');
                });
            }

            showTagSuggestions(suggestions) {
                const container = document.getElementById('tag-suggestions');
                
                if (suggestions.length === 0) {
                    container.style.display = 'none';
                    return;
                }
                
                container.innerHTML = '';
                suggestions.forEach(tag => {
                    const suggestion = document.createElement('div');
                    suggestion.className = 'tag-suggestion';
                    suggestion.textContent = tag;
                    suggestion.addEventListener('click', () => {
                        this.addTag(tag);
                        document.getElementById('tag-input').value = '';
                        container.style.display = 'none';
                    });
                    container.appendChild(suggestion);
                });
                
                container.style.display = 'block';
            }

            addTag(tag) {
                if (!tag || this.getSelectedTags().includes(tag)) return;
                
                const tagContainer = document.getElementById('tag-input-container');
                const tagInput = document.getElementById('tag-input');
                
                const tagElement = document.createElement('div');
                tagElement.className = 'selected-tag';
                tagElement.innerHTML = `
                    ${tag}
                    <span class="tag-remove" onclick="this.parentElement.remove()">√ó</span>
                `;
                
                tagContainer.insertBefore(tagElement, tagInput);
            }

            getSelectedTags() {
                return Array.from(document.querySelectorAll('.selected-tag')).map(tag => 
                    tag.textContent.replace('√ó', '').trim()
                );
            }

            clearSelectedTags() {
                document.querySelectorAll('.selected-tag').forEach(tag => tag.remove());
            }

            async submitCommunityUpload() {
                try {
                    const title = document.getElementById('upload-title').value.trim();
                    const description = document.getElementById('upload-description').value.trim();
                    const category = document.getElementById('upload-category').value;
                    const tags = this.getSelectedTags();
                    
                    if (!title) {
                        this.updateStatus('Please enter a title');
                        return;
                    }
                    
                    const uploadData = {
                        title,
                        description,
                        category,
                        tags,
                        [this.currentUploadType]: this.currentUploadType === 'inventory' ? this.inventory : this.loadouts[this.currentLoadout]
                    };
                    
                    this.updateStatus('Uploading to community...');
                    
                    const response = await fetch(`${this.apiBaseUrl}/community/${this.currentUploadType === 'inventory' ? 'inventories' : 'loadouts'}`, {
                        method: 'POST',
                        headers: { 
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${this.sessionToken}`
                        },
                        body: JSON.stringify(uploadData)
                    });
                    
                    const data =                    <textarea id="upload-description" rows="4" maxlength="500" placeholder="Describe your build, strategy, or setup..."></textarea>
                </div>
                
                <div class="form-group">
                    <label>Tags</label>
                    <div class="tag-input-container" id="tag-input-container">
                        <input type="text" id="tag-input" placeholder="Add tags..." style="border: none; background: none; outline: none; flex: 1; color: #e0e0e0;">
                    </div>
                    <div class="tag-suggestions" id="tag-suggestions" style="display: none; position: relative; margin-top: 5px;">
                        <!-- Tag suggestions will appear here -->
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="upload-category">Category</label>
                    <select id="upload-category">
                        <option value="pvp-loadout">PvP Loadout</option>
                        <option value="pve-setup">PvE Setup</option>
                        <option value="beginner-friendly">Beginner Friendly</option>
                        <option value="resource-rich">Resource Rich</option>
                        <option value="weapon-focus">Weapon Focus</option>
                        <option value="endgame">Endgame</option>
                        <option value="stealth">Stealth</option>
                        <option value="aggressive">Aggressive</option>
                        <option value="support">Support</option>
                        <option value="exploration">Exploration</option>
                    </select>
                </div>
                
                <div style="display: flex; gap: 15px; margin-top: 30px;">
                    <button type="button" class="btn btn-danger" id="cancel-upload-btn" style="flex: 1;">Cancel</button>
                    <button type="submit" class="btn btn-success" id="submit-upload-btn" style="flex: 1;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z"/>
                        </svg>
                        Upload
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Authentication Modal -->
    <div id="auth-modal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <span class="close" id="auth-close">&times;</span>
            <h2 style="color: #64ffda; text-align: center; margin-bottom: 30px;">Community Authentication</h2>
            
            <div id="auth-method-selection">
                <p style="text-align: center; margin-bottom: 30px; color: #a0aec0;">
                    Choose your preferred authentication method to access community features.
                </p>
                
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <button class="btn btn-github" id="github-auth-btn" style="justify-content: center;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                        </svg>
                        Continue with GitHub
                    </button>
                    
                    <div style="text-align: center; margin: 20px 0; color: #4a5568;">
                        <span>or</span>
                    </div>
                    
                    <button class="btn btn-primary" id="simple-auth-btn" style="justify-content: center;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
                        </svg>
                        Simple Username Login
                    </button>
                </div>
            </div>

            <!-- Simple Auth Form -->
            <div id="simple-auth-form" style="display: none;">
                <form class="auth-form">
                    <div class="form-group">
                        <label for="username-input">Username</label>
                        <input type="text" id="username-input" required minlength="3" maxlength="20" pattern="[a-zA-Z0-9_-]+" placeholder="Enter your username...">
                        <small style="color: #a0aec0; font-size: 0.8em;">
                            3-20 characters, letters, numbers, underscore, and dash only
                        </small>
                    </div>
                    
                    <div style="display: flex; gap: 15px; margin-top: 30px;">
                        <button type="button" class="btn btn-danger" id="back-to-auth-methods" style="flex: 1;">Back</button>
                        <button type="submit" class="btn btn-success" style="flex: 1;">Login</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirm-modal" class="modal">
        <div class="modal-content" style="max-width: 400px;">
            <span class="close" id="confirm-close">&times;</span>
            <div style="text-align: center;">
                <h2 style="color: #ff6b6b; margin-bottom: 20px;">Confirm Action</h2>
                <p id="confirm-message" style="margin-bottom: 30px; color: #e0e0e0;"></p>
                <div style="display: flex; gap: 15px; justify-content: center;">
                    <button class="btn btn-danger" id="confirm-yes">Confirm</button>
                    <button class="btn btn-primary" id="confirm-no">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <div class="status-bar">
        <div class="status-text" id="status-text">Auto-connecting to database...</div>
        <div class="connection-status">
            <div class="status-indicator" id="connection-indicator"></div>
            <span id="connection-text">Connecting...</span>
        </div>
    </div>

    <script>
        class CycleRebornCommunityEditor {
            constructor() {
                // Existing properties
                this.inventory = [];
                this.availableItems = [];
                this.itemConfigs = {};
                this.selectedCategory = 'all';
                this.isConnected = false;
                this.currentFilter = '';
                this.apiBaseUrl = '/api';
                this.autoSaveTimeout = null;
                this.imageCache = new Map();
                this.imageErrors = new Set();
                
                // New community properties
                this.currentUser = null;
                this.isAuthenticated = false;
                this.communityInventories = [];
                this.communityLoadouts = [];
                this.githubToken = null;
                this.currentView = 'inventory';
                this.sessionToken = null;
                
                // Loadout system
                this.loadouts = {
                    1: { name: 'Loadout 1', category: 'stealth', slots: {}, attachments: {} },
                    2: { name: 'Loadout 2', category: 'aggressive', slots: {}, attachments: {} },
                    3: { name: 'Loadout 3', category: 'support', slots: {}, attachments: {} }
                };
                this.currentLoadout = 1;
                this.currentEditingWeapon = null;
                this.attachmentPresets = {};
                this.currentLoadoutSlot = null;
                
                // Faction levels
                this.factionLevels = {
                    ica: 0,
                    korolev: 0,
                    osiris: 0
                };
                
                // Available tags for community features
                this.availableTags = [
                    'pvp-loadout', 'pve-setup', 'beginner-friendly', 'resource-rich', 
                    'weapon-focus', 'endgame', 'stealth', 'aggressive', 'support', 
                    'exploration', 'sniper', 'close-quarters', 'budget-build', 
                    'high-tier', 'experimental', 'meta'
                ];
                
                // Remote asset URLs
                this.remoteAssetBase = 'https://raw.githubusercontent.com/lxjo101/TheCycleRebornSaveEditor-Assets/main';
                this.remoteConfigUrl = `${this.remoteAssetBase}/itemConfigs.json`;
                this.remoteItemsUrl = `${this.remoteAssetBase}/itemIds.json`;
                this.remoteIconsUrl = `${this.remoteAssetBase}/icons/`;

                this.init();
                this.bindEvents();
            }

            async init() {
                this.updateStatus('Auto-connecting to database...');
                await this.loadItemConfigs();
                await this.loadAvailableItems();
                
                // Initialize window controls if in Electron
                this.initializeWindowControls();
                
                // Initialize update checker if in Electron
                if (window.electronAPI) {
                    this.initializeUpdateChecker();
                }
                
                // Load saved user session
                this.loadUserSession();
                
                // Auto-connect and load
                this.autoConnectAndLoad();
            }

            bindEvents() {
                // Navigation events
                document.querySelectorAll('.nav-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const view = e.target.dataset.view;
                        if (view) {
                            this.switchView(view);
                        }
                    });
                });

                // Category filters
                document.querySelectorAll('.category-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                        this.selectedCategory = e.target.dataset.category;
                        this.renderInventory();
                        this.filterAvailableItems();
                    });
                });

                // Authentication events
                document.getElementById('login-btn').addEventListener('click', () => this.initializeAuth());
                document.getElementById('logout-btn').addEventListener('click', () => this.logout());
                
                // Community events
                document.getElementById('upload-inventory-btn').addEventListener('click', () => this.showUploadModal('inventory'));
                document.getElementById('upload-loadout-btn').addEventListener('click', () => this.showUploadModal('loadout'));
                
                // Loadout editor events
                this.bindLoadoutEvents();
                
                // Faction editor events
                this.bindFactionEvents();
                
                // Existing events
                this.bindExistingEvents();
            }

            switchView(viewName) {
                // Hide all views
                document.querySelectorAll('.view-container').forEach(view => {
                    view.classList.remove('active');
                });
                
                // Remove active class from all nav buttons
                document.querySelectorAll('.nav-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                
                // Show selected view
                const targetView = document.getElementById(`${viewName}-view`);
                if (targetView) {
                    targetView.classList.add('active');
                }
                
                // Activate corresponding nav button
                const navBtn = document.querySelector(`[data-view="${viewName}"]`);
                if (navBtn) {
                    navBtn.classList.add('active');
                }
                
                // Update view title
                const titles = {
                    'inventory': 'Inventory Editor',
                    'community-inventories': 'Community Inventories',
                    'loadout-editor': 'Loadout Editor',
                    'community-loadouts': 'Community Loadouts',
                    'faction-editor': 'Faction Editor'
                };
                
                document.getElementById('current-view-title').textContent = titles[viewName] || 'Save Editor';
                this.currentView = viewName;
                
                // Handle view-specific initialization
                switch (viewName) {
                    case 'community-inventories':
                        this.initializeCommunityInventories();
                        break;
                    case 'community-loadouts':
                        this.initializeCommunityLoadouts();
                        break;
                    case 'loadout-editor':
                        this.initializeLoadoutEditor();
                        break;
                    case 'faction-editor':
                        this.initializeFactionEditor();
                        break;
                }
            }

            // Authentication System
            async initializeAuth() {
                const modal = document.getElementById('auth-modal');
                modal.style.display = 'block';
                
                // Reset modal state
                document.getElementById('auth-method-selection').style.display = 'block';
                document.getElementById('simple-auth-form').style.display = 'none';
                
                // Bind auth events
                document.getElementById('github-auth-btn').addEventListener('click', () => this.authenticateWithGitHub());
                document.getElementById('simple-auth-btn').addEventListener('click', () => this.showSimpleAuth());
                document.getElementById('back-to-auth-methods').addEventListener('click', () => {
                    document.getElementById('auth-method-selection').style.display = 'block';
                    document.getElementById('simple-auth-form').style.display = 'none';
                });
                
                // Simple auth form submission
                document.querySelector('#simple-auth-form form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.authenticateWithUsername();
                });
            }

            showSimpleAuth() {
                document.getElementById('auth-method-selection').style.display = 'none';
                document.getElementById('simple-auth-form').style.display = 'block';
            }

            async authenticateWithGitHub() {
                try {
                    // In a real implementation, this would redirect to GitHub OAuth
                    const mockUser = {
                        username: 'demo_user',
                        avatar: 'https://github.com/identicons/demo_user.png',
                        type: 'github',
                        token: 'mock_github_token'
                    };
                    
                    this.setAuthenticatedUser(mockUser);
                    this.closeModal('auth-modal');
                    this.updateStatus('Authenticated with GitHub successfully');
                } catch (error) {
                    console.error('GitHub authentication error:', error);
                    this.updateStatus('GitHub authentication failed');
                }
            }

            async authenticateWithUsername() {
                const username = document.getElementById('username-input').value.trim();
                
                if (!username || username.length < 3) {
                    this.updateStatus('Username must be at least 3 characters');
                    return;
                }
                
                try {
                    const response = await fetch(`${this.apiBaseUrl}/auth/simple`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ username })
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        this.sessionToken = data.sessionToken;
                        this.setAuthenticatedUser(data.user);
                        this.closeModal('auth-modal');
                        this.updateStatus(`Logged in as ${username}`);
                    } else {
                        this.updateStatus(data.message || 'Authentication failed');
                    }
                } catch (error) {
                    console.error('Authentication error:', error);
                    this.updateStatus('Authentication failed');
                }
            }

            setAuthenticatedUser(user) {
                this.currentUser = user;
                this.isAuthenticated = true;
                
                // Update UI
                const userProfile = document.getElementById('user-profile');
                const loginBtn = document.getElementById('login-btn');
                const userAvatar = document.getElementById('user-avatar');
                const userName = document.getElementById('user-name');
                
                if (user.type === 'github' && user.avatar) {
                    userAvatar.style.backgroundImage = `url(${user.avatar})`;
                    userAvatar.textContent = '';
                } else {
                    userAvatar.textContent = user.avatar || user.username.charAt(0).toUpperCase();
                    userAvatar.style.backgroundImage = '';
                }
                
                userName.textContent = user.username;
                userProfile.style.display = 'flex';
                loginBtn.style.display = 'none';
                
                // Show community content
                this.updateCommunityAccess();
                
                // Save session
                this.saveUserSession();
            }

            async logout() {
                if (this.sessionToken) {
                    try {
                        await fetch(`${this.apiBaseUrl}/auth/logout`, {
                            method: 'POST',
                            headers: { 'Authorization': `Bearer ${this.sessionToken}` }
                        });
                    } catch (error) {
                        console.error('Logout error:', error);
                    }
                }
                
                this.currentUser = null;
                this.isAuthenticated = false;
                this.sessionToken = null;
                
                // Update UI
                const userProfile = document.getElementById('user-profile');
                const loginBtn = document.getElementById('login-btn');
                
                userProfile.style.display = 'none';
                loginBtn.style.display = 'flex';
                
                // Hide community content
                this.updateCommunityAccess();
                
                // Clear session
                localStorage.removeItem('cycleRebornUser');
                localStorage.removeItem('cycleRebornSessionToken');
                
                this.updateStatus('Logged out successfully');
            }

            saveUserSession() {
                if (this.currentUser) {
                    localStorage.setItem('cycleRebornUser', JSON.stringify(this.currentUser));
                    if (this.sessionToken) {
                        localStorage.setItem('cycleRebornSessionToken', this.sessionToken);
                    }
                }
            }

            loadUserSession() {
                try {
                    const savedUser = localStorage.getItem('cycleRebornUser');
                    const savedToken = localStorage.getItem('cycleRebornSessionToken');
                    
                    if (savedUser && savedToken) {
                        const user = JSON.parse(savedUser);
                        this.sessionToken = savedToken;
                        this.setAuthenticatedUser(user);
                    }
                } catch (error) {
                    console.error('Error loading user session:', error);
                }
            }

            updateCommunityAccess() {
                const inventoriesAuth = document.getElementById('auth-required-inventories');
                const inventoriesContent = document.getElementById('community-inventories-content');
                const loadoutsAuth = document.getElementById('auth-required-loadouts');
                const loadoutsContent = document.getElementById('community-loadouts-content');
                
                if (this.isAuthenticated) {
                    inventoriesAuth.style.display = 'none';
                    inventoriesContent.style.display = 'block';
                    loadoutsAuth.style.display = 'none';
                    loadoutsContent.style.display = 'block';
                } else {
                    inventoriesAuth.style.display = 'block';
                    inventoriesContent.style.display = 'none';
                    loadoutsAuth.style.display = 'block';
                    loadoutsContent.style.display = 'none';
                }
            }

            // Community Inventories System
            async initializeCommunityInventories() {
                if (!this.isAuthenticated) return;
                
                await this.loadCommunityInventories();
                this.bindCommunityInventoryEvents();
            }

            bindCommunityInventoryEvents() {
                // Tag filters
                document.querySelectorAll('#community-inventories-view .filter-tag').forEach(tag => {
                    tag.addEventListener('click', (e) => {
                        document.querySelectorAll('#community-inventories-view .filter-tag').forEach(t => t.classList.remove('active'));
                        e.target.classList.add('active');
                        this.filterCommunityInventories(e.target.dataset.tag);
                    });
                });
                
                // Search
                document.getElementById('search-community-inventories').addEventListener('input', (e) => {
                    this.searchCommunityInventories(e.target.value);
                });
            }

            async loadCommunityInventories() {
                try {
                    const response = await fetch(`${this.apiBaseUrl}/community/inventories`);
                    const data = await response.json();
                    
                    if (data.success) {
                        this.communityInventories = data.inventories;
                        this.renderCommunityInventories();
                    } else {
                        this.updateStatus('Failed to load community inventories');
                    }
                } catch (error) {
                    console.error('Error loading community inventories:', error);
                    this.updateStatus('Failed to load community inventories');
                }
            }

            renderCommunityInventories(inventories = this.communityInventories) {
                const grid = document.getElementById('community-inventories-grid');
                
                if (!inventories.length) {
                    grid.innerHTML = '<div class="loading">No inventories found</div>';
                    return;
                }
                
                grid.innerHTML = '';
                
                inventories.forEach(inventory => {
                    const item = document.createElement('div');
                    item.className = 'community-item';
                    item.innerHTML = `
                        <div class="community-item-header">
                            <div>
                                <h3>${inventory.title}</h3>
                                <div class="community-item-meta">
                                    By ${inventory.author} ‚Ä¢ ${new Date(inventory.uploadDate).toLocaleDateString()}
                                </div>
                            </div>
                            <div class="community-item-rating">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="#ffd700">
                                    <path d="M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.46,13.97L5.82,21L12,17.27Z"/>
                                </svg>
                                ${inventory.rating.toFixed(1)}
                            </div>
                        </div>
                        
                        <div class="community-item-tags">
                            ${inventory.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                        </div>
                        
                        <div class="community-item-preview">
                            ${inventory.description}
                        </div>
                        
                        <div class="community-item-actions">
                            <button class="btn btn-primary btn-sm" onclick="editor.downloadCommunityInventory('${inventory.id}')">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"/>
                                </svg>
                                Download (${inventory.downloads})
                            </button>
                            <button class="btn btn-success btn-sm" onclick="editor.rateCommunityInventory('${inventory.id}', 1)">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M23,10C23,8.89 22.1,8 21,8H14.68L15.64,3.43C15.66,3.33 15.67,3.22 15.67,3.11C15.67,2.7 15.5,2.32 15.23,2.05L14.17,1L7.59,7.58C7.22,7.95 7,8.45 7,9V19A2,2 0 0,0 9,21H18C18.83,21 19.54,20.5 19.84,19.78L22.86,12.73C22.95,12.5 23,12.26 23,12V10.08L23,10M1,21H5V9H1V21Z"/>
                                </svg>
                                Like
                            </button>
                        </div>
                    `;
                    
                    grid.appendChild(item);
                });
            }

            filterCommunityInventories(tag) {
                if (tag === 'all') {
                    this.renderCommunityInventories();
                } else {
                    const filtered = this.communityInventories.filter(inv => 
                        inv.tags.includes(tag)
                    );
                    this.renderCommunityInventories(filtered);
                }
            }

            searchCommunityInventories(query) {
                if (!query.trim()) {
                    this.renderCommunityInventories();
                    return;
                }
                
                const filtered = this.communityInventories.filter(inv => 
                    inv.title.toLowerCase().includes(query.toLowerCase()) ||
                    inv.description.toLowerCase().includes(query.toLowerCase()) ||
                    inv.author.toLowerCase().includes(query.toLowerCase())
                );
                
                this.renderCommunityInventories(filtered);
            }

            async downloadCommunityInventory(inventoryId) {
                try {
                    const response = await fetch(`${this.apiBaseUrl}/community/inventories/${inventoryId}/download`, {
                        method: 'POST'
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        // Add items to current inventory
                        data.inventory.forEach(item => {
                            this.inventory.push({
                                ...item,
                                itemId: this.generateUUID()
                            });
                        });
                        
                        this.renderInventory();
                        this.autoSave();
                        this.updateStatus(`Downloaded inventory - added ${data.inventory.length} items`);
                        
                        // Update download count in UI
                        this.loadCommunityInventories();
                    } else {
                        this.updateStatus(data.message || 'Failed to download inventory');
                    }
                } catch (error) {
                    console.error('Error downloading community inventory:', error);
                    this.updateStatus('Failed to download inventory');
                }
            }

            async rateCommunityInventory(inventoryId, rating) {
                if (!this.isAuthenticated) {
                    this.updateStatus('Please login to rate inventories');
                    return;
                }
                
                try {
                    const response = await fetch(`${this.apiBaseUrl}/community/inventories/${inventoryId}/rate`, {
                        method: 'POST',
                        headers: { 
                            'Content-Type': 'application/json',
                            'Authorization': `Bearer ${this.sessionToken}`
                        },
                        body: JSON.stringify({ rating })
                    });
                    
                    const data = await response.json();
                    
                    if (data.success) {
                        this.updateStatus('Rating submitted successfully');
                        this.loadCommunityInventories(); // Refresh ratings
                    } else {
                        this.updateStatus(data.message || 'Failed to submit rating');
                    }
                } catch (error) {
                    console.error('Error rating inventory:', error);
                    this.updateStatus('Failed to submit rating');
                }
            }

            // Community Loadouts System
            async initializeCommunityLoadouts() {
                if (!this.isAuthenticated) return;
                
                await this.loadCommunityLoadouts();
                this.bindCommunityLoadoutEvents();
            }

            bindCommunityLoadoutEvents() {
                // Category filters for loadouts
                document.querySelectorAll('#community-loadouts-view .filter-tag').forEach(tag => {
                    tag.addEventListener('click', (e) => {
                        document.querySelectorAll('#community-loadouts-view .filter-tag').forEach(t => t.classList.remove('active'));
                        e.target.classList.add('active');
                        this.filterCommunityLoadouts(e.target.dataset.category);
                    });
                });
                
                // Search
                document.getElementById('search-community-loadouts').addEventListener('input', (e) => {
                    this.searchCommunityLoadouts(e.target.value);
                });
            }

            async loadCommunityLoadouts() {
                try {
                    const response = await fetch(`${this.apiBaseUrl}/community/loadouts`);
                    const data = await response.json();
                    
                    if (data.success) {
                        this.communityLoadouts = data.loadouts;
                        this.renderCommunityLoadouts();
                    } else {
                        this.updateStatus('Failed to load community loadouts');
                    }
                } catch (error) {
                    console.error('Error loading community loadouts:', error);
                    this.updateStatus('Failed to load community loadouts');
                }
            }

            renderCommunityLoadouts(loadouts = this.communityLoadouts) {
                const grid = document.getElementById('community-loadouts-grid');
                
                if (!loadouts.length) {
                    grid.innerHTML = '<div class="loading">No loadouts found                    <button class="btn btn-github" style="width: 100%;" onclick="editor.initializeAuth()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                        </svg>
                        Login with GitHub
                    </button>
                </div>

                <!-- Community loadouts content (shown when authenticated) -->
                <div id="community-loadouts-content" style="display: none;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                        <div class="search-container" style="flex: 1; margin-right: 20px; margin-bottom: 0;">
                            <input type="text" class="search-input" id="search-community-loadouts" placeholder="Search community loadouts...">
                        </div>
                        <button class="btn btn-primary" id="upload-loadout-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                            </svg>
                            Upload Loadout
                        </button>
                    </div>

                    <!-- Category filters -->
                    <div class="filter-section" style="margin-bottom: 30px;">
                        <h3>Filter by Category</h3>
                        <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;">
                            <button class="tag filter-tag active" data-category="all">All</button>
                            <button class="tag filter-tag" data-category="stealth">Stealth</button>
                            <button class="tag filter-tag" data-category="aggressive">Aggressive</button>
                            <button class="tag filter-tag" data-category="support">Support</button>
                            <button class="tag filter-tag" data-category="exploration">Exploration</button>
                            <button class="tag filter-tag" data-category="sniper">Sniper</button>
                            <button class="tag filter-tag" data-category="close-quarters">Close Quarters</button>
                        </div>
                    </div>

                    <!-- Community loadouts grid -->
                    <div class="community-grid" id="community-loadouts-grid">
                        <div class="loading">
                            <div class="spinner"></div>
                            Loading community loadouts...
                        </div>
                    </div>
                </div>
            </div>

            <!-- Faction Editor View -->
            <div id="faction-editor-view" class="view-container">
                <div class="faction-editor">
                    <h2 style="color: #64ffda; text-align: center; margin-bottom: 30px;">Faction Level Editor</h2>
                    <p style="text-align: center; color: #a0aec0; margin-bottom: 40px;">
                        Adjust your reputation levels with each faction. Changes are automatically saved.
                    </p>

                    <div class="faction-grid">
                        <!-- ICA Faction -->
                        <div class="faction-card">
                            <div class="faction-logo">ICA</div>
                            <h3 class="faction-name">Independent Civilian Administration</h3>
                            <div class="faction-level-container">
                                <div class="faction-level-display" id="ica-level-display">Level 0</div>
                                <input type="range" class="faction-level-slider" id="ica-slider" min="0" max="100" value="0">
                                <input type="number" class="faction-level-input" id="ica-input" min="0" max="100" value="0">
                            </div>
                            <p style="font-size: 0.9em; color: #a0aec0; text-align: center;">
                                Colonial peacekeepers and civilian administrators
                            </p>
                        </div>

                        <!-- Korolev Faction -->
                        <div class="faction-card">
                            <div class="faction-logo">KOR</div>
                            <h3 class="faction-name">Korolev Heavy Industries</h3>
                            <div class="faction-level-container">
                                <div class="faction-level-display" id="korolev-level-display">Level 0</div>
                                <input type="range" class="faction-level-slider" id="korolev-slider" min="0" max="100" value="0">
                                <input type="number" class="faction-level-input" id="korolev-input" min="0" max="100" value="0">
                            </div>
                            <p style="font-size: 0.9em; color: #a0aec0; text-align: center;">
                                Heavy industry and military equipment specialists
                            </p>
                        </div>

                        <!-- Osiris Faction -->
                        <div class="faction-card">
                            <div class="faction-logo">OSI</div>
                            <h3 class="faction-name">Osiris Research</h3>
                            <div class="faction-level-container">
                                <div class="faction-level-display" id="osiris-level-display">Level 0</div>
                                <input type="range" class="faction-level-slider" id="osiris-slider" min="0" max="100" value="0">
                                <input type="number" class="faction-level-input" id="osiris-input" min="0" max="100" value="0">
                            </div>
                            <p style="font-size: 0.9em; color: #a0aec0; text-align: center;">
                                Advanced technology and research corporation
                            </p>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 40px;">
                        <button class="btn btn-success" id="save-factions-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z"/>
                            </svg>
                            Save Faction Levels
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    
    <!-- Item Detail Modal with Weapon Attachment Editor -->
    <div id="item-detail-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modal-item-details">
                <!-- Item details will be populated here -->
            </div>
            
            <!-- Weapon Attachment Editor (shown for weapons only) -->
            <div id="attachment-editor" class="attachment-editor" style="display: none;">
                <h3 style="color: #64ffda; margin-bottom: 20px;">Weapon Attachments</h3>
                
                <!-- Attachment Presets -->
                <div style="display: flex; gap: 15px; align-items: center; margin-bottom: 20px;">
                    <select id="attachment-preset-select" class="search-input" style="width: 200px; margin-bottom: 0;">
                        <option value="">Select Preset...</option>
                        <option value="default">Default Setup</option>
                        <option value="cqb">Close Quarters</option>
                        <option value="ranged">Long Range</option>
                        <option value="stealth">Stealth Setup</option>
                    </select>
                    <button class="btn btn-primary" id="load-preset-btn">Load</button>
                    <button class="btn btn-success" id="save-preset-btn">Save As...</button>
                </div>

                <!-- Attachment Grid -->
                <div class="attachment-grid">
                    <!-- Row 1 -->
                    <div class="attachment-slot empty" data-attachment-type="optics">
                        <div class="attachment-slot-label">Optics</div>
                        <div class="attachment-slot-icon"></div>
                        <div class="attachment-slot-name">Empty</div>
                    </div>
                    <div class="attachment-slot empty" data-attachment-type="magazine">
                        <div class="attachment-slot-label">Magazine</div>
                        <div class="attachment-slot-icon"></div>
                        <div class="attachment-slot-name">Empty</div>
                    </div>
                    <div class="attachment-slot empty" data-attachment-type="muzzle" id="muzzle-slot">
                        <div class="attachment-slot-label">Muzzle</div>
                        <div class="attachment-slot-icon"></div>
                        <div class="attachment-slot-name">Empty</div>
                    </div>
                    <div class="attachment-slot empty" data-attachment-type="stock">
                        <div class="attachment-slot-label">Stock</div>
                        <div class="attachment-slot-icon"></div>
                        <div class="attachment-slot-name">Empty</div>
                    </div>
                    
                    <!-- Row 2 -->
                    <div class="attachment-slot empty" data-attachment-type="fore-grip">
                        <div class="attachment-slot-label">Fore Grip</div>
                        <div class="attachment-slot-icon"></div>
                        <div class="attachment-slot-name">Empty</div>
                    </div>
                    <div class="attachment-slot empty" data-attachment-type="tactical">
                        <div class="attachment-slot-label">Tactical</div>
                        <div class="attachment-slot-icon"></div>
                        <div class="attachment-slot-name">Empty</div>
                    </div>
                    <div class="attachment-slot empty" data-attachment-type="ammo-converter">
                        <div class="attachment-slot-label">Ammo Converter</div>
                        <div class="attachment-slot-icon"></div>
                        <div class="attachment-slot-name">Empty</div>
                    </div>
                    <div class="attachment-slot empty" data-attachment-type="rear-grip">
                        <div class="attachment-slot-label">Rear Grip</div>
                        <div class="attachment-slot-icon"></div>
                        <div class="attachment-slot-name">Empty</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Attachment Selection Modal -->
    <div id="attachment-selection-modal" class="modal">
        <div class="modal-content">
            <span class="close" id="attachment-selection-close">&times;</span>
            <h2 style="color: #64ffda; margin-bottom: 20px;" id="attachment-selection-title">Select Attachment</h2>
            
            <div class="search-container">
                <input type="text" class="search-input" id="search-attachments" placeholder="Search attachments...">
            </div>
            
            <div class="community-grid" id="attachment-selection-grid">
                <!-- Available attachments will be populated here -->
            </div>
        </div>
    </div>

    <!-- Community Upload Modal -->
    <div id="community-upload-modal" class="modal">
        <div class="modal-content">
            <span class="close" id="community-upload-close">&times;</span>
            <h2 style="color: #64ffda; margin-bottom: 20px;" id="upload-modal-title">Upload to Community</h2>
            
            <form class="auth-form" id="community-upload-form">
                <div class="form-group">
                    <label for="upload-title">Title *</label>
                    <input type="text" id="upload-title" required maxlength="100" placeholder="Enter a descriptive title...">
                </div>
                
                <div class="form-group">
                    <label for="upload-description">Description</label>
                    <textarea id="upload-description" rows="4" max<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Cycle: Reborn - Save Editor Community Edition</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #e0e0e0;
            min-height: 100vh;
            overflow-x: hidden;
            overflow-y: auto;
            margin: 0;
            padding: 0;
        }

        /* Custom Title Bar */
        .custom-title-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 30px;
            background: rgba(20, 25, 40, 0.95);
            border-bottom: 1px solid #4a5568;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            -webkit-app-region: drag;
            backdrop-filter: blur(10px);
        }

        .title-bar-title {
            color: #64ffda;
            font-size: 0.85em;
            font-weight: 600;
            margin-left: 15px;
            text-shadow: 0 0 5px rgba(100, 255, 218, 0.3);
        }

        .title-bar-controls {
            display: flex;
            -webkit-app-region: no-drag;
        }

        .title-bar-button {
            width: 46px;
            height: 30px;
            border: none;
            background: transparent;
            color: #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.2s ease;
            font-size: 14px;
        }

        .title-bar-button:hover {
            background: rgba(100, 255, 218, 0.1);
            color: #64ffda;
        }

        .title-bar-button.close:hover {
            background: #ff6b6b;
            color: white;
        }

        /* Container */
        .container {
            display: flex;
            min-height: 100vh;
            padding-top: 30px;
            padding-bottom: 80px;
        }

        /* Enhanced Sidebar */
        .sidebar {
            width: 260px;
            background: rgba(20, 25, 40, 0.9);
            padding: 15px;
            padding-bottom: 120px;
            border-right: 2px solid #4a5568;
            backdrop-filter: blur(10px);
            position: fixed;
            top: 30px;
            left: 0;
            height: calc(100vh - 30px);
            overflow-y: auto;
            z-index: 50;
        }

        .sidebar h2 {
            color: #64ffda;
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.1em;
            border-bottom: 2px solid #4a5568;
            padding-bottom: 8px;
        }

        .filter-section {
            margin-bottom: 20px;
        }

        .filter-section h3 {
            color: #a0aec0;
            margin-bottom: 8px;
            font-size: 0.8em;
            text-transform: uppercase;
            font-weight: 600;
        }

        .filter-btn, .category-btn, .nav-btn {
            display: block;
            width: 100%;
            padding: 10px 12px;
            margin-bottom: 4px;
            background: rgba(45, 55, 75, 0.8);
            border: 1px solid #4a5568;
            color: #e0e0e0;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 6px;
            font-size: 0.85em;
            line-height: 1.2;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-btn:hover, .category-btn:hover, .nav-btn:hover {
            background: rgba(100, 255, 218, 0.2);
            border-color: #64ffda;
            transform: translateX(5px);
        }

        .filter-btn.active, .category-btn.active, .nav-btn.active {
            background: linear-gradient(135deg, #64ffda 0%, #4fd1c7 100%);
            color: #1a202c;
            border-color: #64ffda;
        }

        .nav-btn svg {
            width: 16px;
            height: 16px;
            flex-shrink: 0;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 20px;
            padding-bottom: 100px;
            padding-left: 280px;
            overflow-y: auto;
        }

        /* Header */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px 30px;
            background: rgba(20, 25, 40, 0.8);
            border-radius: 10px;
            border: 1px solid #4a5568;
            position: sticky;
            top: 20px;
            z-index: 100;
            backdrop-filter: blur(10px);
        }

        .header-left h1 {
            color: #64ffda;
            font-size: 2em;
            text-shadow: 0 0 10px rgba(100, 255, 218, 0.3);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        /* User Profile Display */
        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(0, 0, 0, 0.3);
            padding: 8px 12px;
            border-radius: 20px;
            border: 1px solid rgba(100, 255, 218, 0.3);
        }

        .user-avatar {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #64ffda;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #1a202c;
        }

        .user-name {
            font-size: 0.9em;
            color: #64ffda;
        }

        /* Currency Display */
        .currency-display {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .currency-item {
            display: flex;
            align-items: center;
            gap: 5px;
            background: rgba(0, 0, 0, 0.5);
            padding: 4px 8px;
            border-radius: 15px;
            border: 1px solid rgba(100, 255, 218, 0.3);
        }

        .currency-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            background-color: rgba(45, 55, 75, 0.8);
        }

        .currency-item input {
            background: none;
            border: none;
            color: #e0e0e0;
            font-size: 14px;
            text-align: right;
            width: 60px;
            -webkit-appearance: textfield;
            -moz-appearance: textfield;
            appearance: textfield;
        }

        .currency-item input::-webkit-outer-spin-button,
        .currency-item input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .currency-item input:focus {
            outline: none;
            color: #64ffda;
        }

        /* Buttons */
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85em;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.4);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 65, 108, 0.4);
        }

        .btn-github {
            background: linear-gradient(135deg, #333 0%, #555 100%);
            color: white;
        }

        .btn-github:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }

        /* View Containers */
        .view-container {
            display: none;
        }

        .view-container.active {
            display: block;
        }

        /* Search */
        .search-container {
            margin-bottom: 20px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 15px 20px;
            background: rgba(45, 55, 75, 0.8);
            border: 2px solid #4a5568;
            border-radius: 8px;
            color: #e0e0e0;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #64ffda;
            background: rgba(45, 55, 75, 1);
            box-shadow: 0 0 20px rgba(100, 255, 218, 0.2);
        }

        /* Inventory Grid */
        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            padding: 20px;
            background: rgba(20, 25, 40, 0.6);
            border-radius: 10px;
            border: 1px solid #4a5568;
            max-height: 600px;
            overflow-y: auto;
        }

        .item-slot {
            aspect-ratio: 1;
            background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
            border: 2px solid #4a5568;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            padding: 8px;
        }

        .item-slot:hover {
            border-color: #64ffda;
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(100, 255, 218, 0.2);
        }

        .item-image {
            width: 60px;
            height: 60px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            margin-bottom: 5px;
            border-radius: 4px;
            position: relative;
        }

        .item-name {
            font-size: 0.7em;
            text-align: center;
            color: #a0aec0;
            max-width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .item-amount {
            position: absolute;
            bottom: 5px;
            right: 5px;
            background: rgba(0, 0, 0, 0.8);
            color: #64ffda;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.8em;
            font-weight: bold;
        }

        /* Rarity Colors */
        .rarity-common { border-color: #9e9e9e; color: #9e9e9e; }
        .rarity-uncommon { border-color: #4caf50; color: #4caf50; }
        .rarity-rare { border-color: #2196f3; color: #2196f3; }
        .rarity-epic { border-color: #9c27b0; color: #9c27b0; }
        .rarity-exotic { border-color: #ff4e4e; color: #ff4e4e; }
        .rarity-legendary { border-color: #ff9800; color: #ff9800; }

        /* Community Grid */
        .community-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .community-item {
            background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
            border: 2px solid #4a5568;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .community-item:hover {
            border-color: #64ffda;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(100, 255, 218, 0.2);
        }

        .community-item-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .community-item h3 {
            color: #64ffda;
            font-size: 1.2em;
            margin-bottom: 5px;
        }

        .community-item-meta {
            font-size: 0.8em;
            color: #a0aec0;
        }

        .community-item-rating {
            display: flex;
            align-items: center;
            gap: 5px;
            background: rgba(0, 0, 0, 0.3);
            padding: 4px 8px;
            border-radius: 12px;
        }

        .community-item-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 10px 0;
        }

        .tag {
            background: rgba(100, 255, 218, 0.2);
            color: #64ffda;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7em;
            font-weight: 600;
        }

        .community-item-preview {
            margin: 15px 0;
            font-size: 0.9em;
            color: #e0e0e0;
            line-height: 1.4;
        }

        .community-item-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        /* Loadout Editor */
        .loadout-editor {
            background: rgba(20, 25, 40, 0.8);
            border-radius: 15px;
            border: 2px solid #4a5568;
            padding: 30px;
            margin-top: 20px;
        }

        .loadout-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #4a5568;
            padding-bottom: 15px;
        }

        .loadout-tab {
            padding: 10px 20px;
            background: rgba(45, 55, 75, 0.8);
            border: 1px solid #4a5568;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #e0e0e0;
        }

        .loadout-tab.active {
            background: linear-gradient(135deg, #64ffda 0%, #4fd1c7 100%);
            color: #1a202c;
            border-color: #64ffda;
        }

        .loadout-character {
            display: grid;
            grid-template-columns: 1fr 200px 1fr;
            gap: 30px;
            align-items: center;
            margin-bottom: 30px;
        }

        .loadout-slots-left, .loadout-slots-right {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .loadout-character-silhouette {
            background: rgba(45, 55, 75, 0.5);
            border: 2px dashed #4a5568;
            border-radius: 10px;
            height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #64ffda;
            font-size: 1.2em;
            font-weight: bold;
        }

        .loadout-slot {
            background: rgba(45, 55, 75, 0.8);
            border: 2px solid #4a5568;
            border-radius: 8px;
            padding: 15px;
            min-height: 80px;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .loadout-slot:hover {
            border-color: #64ffda;
            background: rgba(100, 255, 218, 0.1);
        }

        .loadout-slot.empty {
            border-style: dashed;
            justify-content: center;
            color: #a0aec0;
        }

        .loadout-slot-icon {
            width: 50px;
            height: 50px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            border-radius: 6px;
            flex-shrink: 0;
        }

        .loadout-slot-info h4 {
            color: #64ffda;
            margin-bottom: 5px;
        }

        .loadout-slot-info p {
            color: #a0aec0;
            font-size: 0.8em;
        }

        /* Weapon Attachment Editor */
        .attachment-editor {
            margin-top: 30px;
            padding: 20px;
            background: rgba(45, 55, 75, 0.3);
            border-radius: 10px;
            border: 1px solid #4a5568;
        }

        .attachment-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .attachment-slot {
            background: rgba(20, 25, 40, 0.8);
            border: 2px solid #4a5568;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 100px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .attachment-slot:hover {
            border-color: #64ffda;
            background: rgba(100, 255, 218, 0.1);
        }

        .attachment-slot.empty {
            border-style: dashed;
            color: #a0aec0;
        }

        .attachment-slot-icon {
            width: 40px;
            height: 40px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            margin-bottom: 8px;
        }

        .attachment-slot-label {
            font-size: 0.8em;
            color: #a0aec0;
            margin-bottom: 5px;
        }

        .attachment-slot-name {
            font-size: 0.7em;
            color: #64ffda;
            font-weight: 600;
        }

        /* Faction Editor */
        .faction-editor {
            background: rgba(20, 25, 40, 0.8);
            border-radius: 15px;
            border: 2px solid #4a5568;
            padding: 30px;
            margin-top: 20px;
        }

        .faction-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .faction-card {
            background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
            border: 2px solid #4a5568;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .faction-card:hover {
            border-color: #64ffda;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(100, 255, 218, 0.2);
        }

        .faction-logo {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px auto;
            background: rgba(100, 255, 218, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            font-weight: bold;
            color: #64ffda;
        }

        .faction-name {
            color: #64ffda;
            font-size: 1.5em;
            margin-bottom: 15px;
        }

        .faction-level-container {
            margin: 20px 0;
        }

        .faction-level-slider {
            width: 100%;
            margin: 15px 0;
            appearance: none;
            -webkit-appearance: none;
            height: 8px;
            border-radius: 4px;
            background: rgba(100, 255, 218, 0.3);
            outline: none;
        }

        .faction-level-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #64ffda;
            cursor: pointer;
        }

        .faction-level-input {
            background: rgba(45, 55, 75, 0.8);
            border: 1px solid #4a5568;
            border-radius: 6px;
            color: #e0e0e0;
            padding: 8px 12px;
            text-align: center;
            width: 80px;
            margin: 10px 0;
        }

        .faction-level-display {
            color: #64ffda;
            font-size: 1.2em;
            font-weight: bold;
            margin: 10px 0;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
            margin: 5% auto;
            padding: 30px;
            border: 2px solid #64ffda;
            border-radius: 15px;
            width: 90%;
            max-width: 800px;
            color: #e0e0e0;
            box-shadow: 0 20px 60px rgba(100, 255, 218, 0.3);
            max-height: 80vh;
            overflow-y: auto;
        }

        .close {
            color: #a0aec0;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: #64ffda;
        }

        /* Authentication Forms */
        .auth-container {
            max-width: 400px;
            margin: 50px auto;
            padding: 30px;
            background: rgba(20, 25, 40, 0.9);
            border-radius: 15px;
            border: 2px solid #4a5568;
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            color: #a0aec0;
            font-size: 0.9em;
            font-weight: 600;
        }

        .form-group input, .form-group textarea, .form-group select {
            background: rgba(45, 55, 75, 0.8);
            border: 1px solid #4a5568;
            border-radius: 6px;
            color: #e0e0e0;
            padding: 12px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            outline: none;
            border-color: #64ffda;
        }

        /* Tag Input */
        .tag-input-container {
            background: rgba(45, 55, 75, 0.8);
            border: 1px solid #4a5568;
            border-radius: 6px;
            padding: 8px;
            min-height: 45px;
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            align-items: center;
        }

        .tag-input-container.focused {
            border-color: #64ffda;
        }

        .selected-tag {
            background: rgba(100, 255, 218, 0.2);
            color: #64ffda;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8em;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .tag-remove {
            cursor: pointer;
            font-weight: bold;
        }

        .tag-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: rgba(20, 25, 40, 0.95);
            border: 1px solid #4a5568;
            border-radius: 6px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 100;
        }

        .tag-suggestion {
            padding: 10px;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .tag-suggestion:hover {
            background: rgba(100, 255, 218, 0.1);
        }

        /* Loading States */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
            color: #64ffda;
            font-size: 1.2em;
        }

        .spinner {
            border: 3px solid rgba(100, 255, 218, 0.3);
            border-top: 3px solid #64ffda;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin-right: 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Status Bar */
        .status-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(20, 25, 40, 0.95);
            padding: 15px;
            border-top: 2px solid #4a5568;
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(10px);
            z-index: 900;
        }

        .status-text {
            color: #a0aec0;
        }

        .connection-status {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ff6b6b;
            animation: pulse 2s infinite;
        }

        .status-indicator.connected {
            background: #64ffda;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .sidebar {
                width: 220px;
            }
            .main-content {
                padding-left: 240px;
            }
        }

        /* Scrollbar Styling */
        .scrollbar-style {
            scrollbar-width: thin;
            scrollbar-color: #64ffda rgba(45, 55, 75, 0.8);
        }

        .scrollbar-style::-webkit-scrollbar {
            width: 8px;
        }

        .scrollbar-style::-webkit-scrollbar-track {
            background: rgba(45, 55, 75, 0.8);
            border-radius: 4px;
        }

        .scrollbar-style::-webkit-scrollbar-thumb {
            background: #64ffda;
            border-radius: 4px;
        }

        .scrollbar-style::-webkit-scrollbar-thumb:hover {
            background: #4fd1c7;
        }
    </style>
</head>
<body>
    <!-- Custom Title Bar -->
    <div class="custom-title-bar">
        <div class="title-bar-title">The Cycle: Reborn - Save Editor Community Edition</div>
        <div class="title-bar-controls" id="title-bar-controls">
            <!-- Window controls will be added by JavaScript if in Electron -->
        </div>
    </div>

    <div class="container">
        <!-- Enhanced Sidebar -->
        <div class="sidebar">
            <h2>NAVIGATION</h2>
            
            <div class="filter-section">
                <h3>Core Features</h3>
                <button class="nav-btn active" data-view="inventory">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 7h-3V6a4 4 0 0 0-8 0v1H5a1 1 0 0 0-1 1v11a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V8a1 1 0 0 0-1-1zM10 6a2 2 0 0 1 4 0v1h-4V6zm8 13a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V9h2v1a1 1 0 0 0 2 0V9h4v1a1 1 0 0 0 2 0V9h2v10z"/>
                    </svg>
                    INVENTORY
                </button>
                <button class="nav-btn" data-view="loadout-editor">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"/>
                        <path d="M12 6a6 6 0 1 0 6 6 6 6 0 0 0-6-6zm0 10a4 4 0 1 1 4-4 4 4 0 0 1-4 4z"/>
                    </svg>
                    LOADOUT EDITOR
                </button>
                <button class="nav-btn" data-view="faction-editor">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                    </svg>
                    FACTION EDITOR
                </button>
            </div>

            <div class="filter-section">
                <h3>Community Features</h3>
                <button class="nav-btn" data-view="community-inventories">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M16 4h-4V2a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v2H0v2h2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6h2V4zM6 2h4v2H6V2zm10 18H4V6h12v14z"/>
                        <path d="M6 8h8v2H6zM6 12h8v2H6zM6 16h8v2H6z"/>
                    </svg>
                    COMMUNITY INVENTORIES
                </button>
                <button class="nav-btn" data-view="community-loadouts">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                    </svg>
                    COMMUNITY LOADOUTS
                </button>
            </div>

            <div class="filter-section">
                <h3>Categories</h3>
                <button class="category-btn active" data-category="all">ALL</button>
                <button class="category-btn" data-category="weapons">WEAPONS</button>
                <button class="category-btn" data-category="ammo">AMMO</button>
                <button class="category-btn" data-category="armor">ARMOR</button>
                <button class="category-btn" data-category="consumables">CONSUMABLES</button>
                <button class="category-btn" data-category="materials">MATERIALS</button>
                <button class="category-btn" data-category="tools">TOOLS</button>
                <button class="category-btn" data-category="attachments">ATTACHMENTS</button>
            </div>

            <div class="filter-section">
                <h3>Actions</h3>
                <button class="filter-btn" id="add-item-btn">Browse Items</button>
                <button class="filter-btn" id="clear-inventory">Clear All</button>
                <button class="filter-btn" id="backup-save">Export Backup</button>
                <button class="filter-btn" id="restore-save">Import Backup</button>
            </div>

            <div class="filter-section">
                <h3>Game</h3>
                <button class="filter-btn" id="launch-game-btn">
                    <span id="launch-game-text">Launch Game</span>
                </button>
                <button class="filter-btn" id="configure-game-btn" style="display: none;">
                    Configure Game Path
                </button>
            </div>

            <div class="filter-section" id="update-section" style="display: none;">
                <h3>Updates</h3>
                <button class="filter-btn btn-update" id="check-updates-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 6px;">
                        <path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"/>
                    </svg>
                    Check Updates
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content" id="main-content">
            <!-- Header -->
            <div class="header">
                <div class="header-left">
                    <h1 id="current-view-title">Inventory Editor</h1>
                </div>
                <div class="header-right">
                    <!-- User Profile (shown when logged in) -->
                    <div class="user-profile" id="user-profile" style="display: none;">
                        <div class="user-avatar" id="user-avatar">U</div>
                        <div class="user-name" id="user-name">Guest</div>
                        <button class="btn btn-danger btn-sm" id="logout-btn">Logout</button>
                    </div>
                    
                    <!-- Login Button (shown when not logged in) -->
                    <button class="btn btn-github" id="login-btn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                        </svg>
                        Login with GitHub
                    </button>

                    <!-- Currency Display -->
                    <div class="currency-display">
                        <div class="currency-item" id="aurum-display">
                            <div class="currency-icon" style="background-image: url('https://lxjo101.github.io/TheCycleRebornSaveEditor-Assets/icons/Aurum.png')"></div>
                            <input type="number" id="aurum-value" value="0" min="0" max="999999">
                        </div>
                        <div class="currency-item" id="kmarks-display">
                            <div class="currency-icon" style="background-image: url('https://lxjo101.github.io/TheCycleRebornSaveEditor-Assets/icons/K-Marks.png')"></div>
                            <input type="number" id="kmarks-value" value="0" min="0" max="999999">
                        </div>
                        <div class="currency-item" id="insurance-display">
                            <div class="currency-icon" style="background-image: url('https://lxjo101.github.io/TheCycleRebornSaveEditor-Assets/icons/InsuranceToken.png')"></div>
                            <input type="number" id="insurance-value" value="0" min="0" max="999999">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Inventory View -->
            <div id="inventory-view" class="view-container active">
                <div class="search-container">
                    <input type="text" class="search-input" id="search-items" placeholder="Search items by name or ID...">
                </div>

                <div id="inventory-container">
                    <h3 style="color: #64ffda; margin-bottom: 15px;">Current Inventory (Stash)</h3>
                    <div class="inventory-grid scrollbar-style" id="inventory-grid">
                        <div class="loading">
                            <div class="spinner"></div>
                            Connecting and loading inventory...
                        </div>
                    </div>
                </div>

                <div id="available-items-container" style="display: none;">
                    <h3 style="color: #64ffda; margin-bottom: 15px; margin-top: 30px;">Available Items</h3>
                    <div class="community-grid" id="available-items">
                        <!-- Available items will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Community Inventories View -->
            <div id="community-inventories-view" class="view-container">
                <!-- Authentication required message -->
                <div id="auth-required-inventories" class="auth-container">
                    <h2 style="color: #64ffda; text-align: center; margin-bottom: 20px;">Community Inventories</h2>
                    <p style="text-align: center; margin-bottom: 30px; color: #a0aec0;">
                        Share your inventories with the community and discover builds from other players.
                        Login with GitHub to access community features.
                    </p>
                    <button class="btn btn-github" style="width: 100%;" onclick="editor.initializeAuth()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                        </svg>
                        Login with GitHub
                    </button>
                </div>

                <!-- Community loadouts content (shown when authenticated) -->
                <div id="community-loadouts-content" style="display: none;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                        <div class="search-container" style="flex: 1; margin-right: 20px; margin-bottom: 0;">
                            <input type="text" class="search-input" id="search-community-loadouts" placeholder="Search community loadouts...">
                        </div>
                        <button class="btn btn-primary" id="upload-loadout-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                            </svg>
                            Upload Loadout
                        </button>
                    </div>

                    <!-- Category filters -->
                    <div class="filter-section" style="margin-bottom: 30px;">
                        <h3>Filter by Category</h3>
                        <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;">
                            <button class="tag filter-tag active" data-category="all">All</button>
                            <button class="tag filter-tag" data-category="stealth">Stealth</button>
                            <button class="tag filter-tag" data-category="aggressive">Aggressive</button>
                            <button class="tag filter-tag" data-category="support">Support</button>
                            <button class="tag filter-tag" data-category="exploration">Exploration</button>
                            <button class="tag filter-tag" data-category="sniper">Sniper</button>
                            <button class="tag filter-tag" data-category="close-quarters">Close Quarters</button>
                        </div>
                    </div>

                    <!-- Community loadouts grid -->
                    <div class="community-grid" id="community-loadouts-grid">
                        <div class="loading">
                            <div class="spinner"></div>
                            Loading community loadouts...
                        </div>
                    </div>
                </div>
            </div>

            <!-- Faction Editor View -->
            <div id="faction-editor-view" class="view-container">
                <div class="faction-editor">
                    <h2 style="color: #64ffda; text-align: center; margin-bottom: 30px;">Faction Level Editor</h2>
                    <p style="text-align: center; color: #a0aec0; margin-bottom: 40px;">
                        Adjust your reputation levels with each faction. Changes are automatically saved.
                    </p>

                    <div class="faction-grid">
                        <!-- ICA Faction -->
                        <div class="faction-card">
                            <div class="faction-logo">ICA</div>
                            <h3 class="faction-name">Independent Civilian Administration</h3>
                            <div class="faction-level-container">
                                <div class="faction-level-display" id="ica-level-display">Level 0</div>
                                <input type="range" class="faction-level-slider" id="ica-slider" min="0" max="100" value="0">
                                <input type="number" class="faction-level-input" id="ica-input" min="0" max="100" value="0">
                            </div>
                            <p style="font-size: 0.9em; color: #a0aec0; text-align: center;">
                                Colonial peacekeepers and civilian administrators
                            </p>
                        </div>

                        <!-- Korolev Faction -->
                        <div class="faction-card">
                            <div class="faction-logo">KOR</div>
                            <h3 class="faction-name">Korolev Heavy Industries</h3>
                            <div class="faction-level-container">
                                <div class="faction-level-display" id="korolev-level-display">Level 0</div>
                                <input type="range" class="faction-level-slider" id="korolev-slider" min="0" max="100" value="0">
                                <input type="number" class="faction-level-input" id="korolev-input" min="0" max="100" value="0">
                            </div>
                            <p style="font-size: 0.9em; color: #a0aec0; text-align: center;">
                                Heavy industry and military equipment specialists
                            </p>
                        </div>

                        <!-- Osiris Faction -->
                        <div class="faction-card">
                            <div class="faction-logo">OSI</div>
                            <h3 class="faction-name">Osiris Research</h3>
                            <div class="faction-level-container">
                                <div class="faction-level-display" id="osiris-level-display">Level 0</div>
                                <input type="range" class="faction-level-slider" id="osiris-slider" min="0" max="100" value="0">
                                <input type="number" class="faction-level-input" id="osiris-input" min="0" max="100" value="0">
                            </div>
                            <p style="font-size: 0.9em; color: #a0aec0; text-align: center;">
                                Advanced technology and research corporation
                            </p>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 40px;">
                        <button class="btn btn-success" id="save-factions-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z"/>
                            </svg>
                            Save Faction Levels
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    
    <!-- Item Detail Modal with Weapon Attachment Editor -->
    <div id="item-detail-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modal-item-details">
                <!-- Item details will be populated here -->
            </div>
            
            <!-- Weapon Attachment Editor (shown for weapons only) -->
            <div id="attachment-editor" class="attachment-editor" style="display: none;">
                <h3 style="color: #64ffda; margin-bottom: 20px;">Weapon Attachments</h3>
                
                <!-- Attachment Presets -->
                <div style="display: flex; gap: 15px; align-items: center; margin-bottom: 20px;">
                    <select id="attachment-preset-select" class="search-input" style="width: 200px; margin-bottom: 0;">
                        <option value="">Select Preset...</option>
                        <option value="default">Default Setup</option>
                        <option value="cqb">Close Quarters</option>
                        <option value="ranged">Long Range</option>
                        <option value="stealth">Stealth Setup</option>
                    </select>
                    <button class="btn btn-primary" id="load-preset-btn">Load</button>
                    <button class="btn btn-success" id="save-preset-btn">Save As...</button>
                </div>

                <!-- Attachment Grid -->
                <div class="attachment-grid">
                    <!-- Row 1 -->
                    <div class="attachment-slot empty" data-attachment-type="optics">
                        <div class="attachment-slot-label">Optics</div>
                        <div class="attachment-slot-icon"></div>
                        <div class="attachment-slot-name">Empty</div>
                    </div>
                    <div class="attachment-slot empty" data-attachment-type="magazine">
                        <div class="attachment-slot-label">Magazine</div>
                        <div class="attachment-slot-icon"></div>
                        <div class="attachment-slot-name">Empty</div>
                    </div>
                    <div class="attachment-slot empty" data-attachment-type="muzzle" id="muzzle-slot">
                        <div class="attachment-slot-label">Muzzle</div>
                        <div class="attachment-slot-icon"></div>
                        <div class="attachment-slot-name">Empty</div>
                    </div>
                    <div class="attachment-slot empty" data-attachment-type="stock">
                        <div class="attachment-slot-label">Stock</div>
                        <div class="attachment-slot-icon"></div>
                        <div class="attachment-slot-name">Empty</div>
                    </div>
                    
                    <!-- Row 2 -->
                    <div class="attachment-slot empty" data-attachment-type="fore-grip">
                        <div class="attachment-slot-label">Fore Grip</div>
                        <div class="attachment-slot-icon"></div>
                        <div class="attachment-slot-name">Empty</div>
                    </div>
                    <div class="attachment-slot empty" data-attachment-type="tactical">
                        <div class="attachment-slot-label">Tactical</div>
                        <div class="attachment-slot-icon"></div>
                        <div class="attachment-slot-name">Empty</div>
                    </div>
                    <div class="attachment-slot empty" data-attachment-type="ammo-converter">
                        <div class="attachment-slot-label">Ammo Converter</div>
                        <div class="attachment-slot-icon"></div>
                        <div class="attachment-slot-name">Empty</div>
                    </div>
                    <div class="attachment-slot empty" data-attachment-type="rear-grip">
                        <div class="attachment-slot-label">Rear Grip</div>
                        <div class="attachment-slot-icon"></div>
                        <div class="attachment-slot-name">Empty</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Attachment Selection Modal -->
    <div id="attachment-selection-modal" class="modal">
        <div class="modal-content">
            <span class="close" id="attachment-selection-close">&times;</span>
            <h2 style="color: #64ffda; margin-bottom: 20px;" id="attachment-selection-title">Select Attachment</h2>
            
            <div class="search-container">
                <input type="text" class="search-input" id="search-attachments" placeholder="Search attachments...">
            </div>
            
            <div class="community-grid" id="attachment-selection-grid">
                <!-- Available attachments will be populated here -->
            </div>
        </div>
    </div>

    <!-- Community Upload Modal -->
    <div id="community-upload-modal" class="modal">
        <div class="modal-content">
            <span class="close" id="community-upload-close">&times;</span>
            <h2 style="color: #64ffda; margin-bottom: 20px;" id="upload-modal-title">Upload to Community</h2>
            
            <form class="auth-form" id="community-upload-form">
                <div class="form-group">
                    <label for="upload-title">Title *</label>
                    <input type="text" id="upload-title" required maxlength="100" placeholder="Enter a descriptive title...">
                </div>
                
                <div class="form-group">
                    <label for="upload-description">Description</label>
                    <textarea id="upload-description" rows="4" maxlength="500" placeholder="Describe your build, strategy, or setup..."></textarea>
                </div>
                
                <div class="form-group">
                    <label>Tags</label>
                    <div class="tag-input-container" id="tag-input-container">
                        <input type="text" id="tag-input" placeholder="Add tags..." style="border: none; background: none; outline: none; flex: 1; color: #e0e0e0;">
                    </div>
                    <div class="tag-suggestions" id="tag-suggestions" style="display: none; position: relative; margin-top: 5px;">
                        <!-- Tag suggestions will appear here -->
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="upload-category">Category</label>
                    <select id="upload-category">
                        <option value="pvp-loadout">PvP Loadout</option>
                        <option value="pve-setup">PvE Setup</option>
                        <option value="beginner-friendly">Beginner Friendly</option>
                        <option value="resource-rich">Resource Rich</option>
                        <option value="weapon-focus">Weapon Focus</option>
                        <option value="endgame">Endgame</option>
                        <option value="stealth">Stealth</option>
                        <option value="aggressive">Aggressive</option>
                        <option value="support">Support</option>
                        <option value="exploration">Exploration</option>
                    </select>
                </div>
                
                <div style="display: flex; gap: 15px; margin-top: 30px;">
                    <button type="button" class="btn btn-danger" id="cancel-upload-btn" style="flex: 1;">Cancel</button>
                    <button type="submit" class="btn btn-success" id="submit-upload-btn" style="flex: 1;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z"/>
                        </svg>
                        Upload
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Authentication Modal -->
    <div id="auth-modal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <span class="close" id="auth-close">&times;</span>
            <h2 style="color: #64ffda; text-align: center; margin-bottom: 30px;">Community Authentication</h2>
            
            <div id="auth-method-selection">
                <p style="text-align: center; margin-bottom: 30px; color: #a0aec0;">
                    Choose your preferred authentication method to access community features.
                </p>
                
                <div style="display: flex; flex-direction: column; gap: 15px;">
                    <button class="btn btn-github" id="github-auth-btn" style="justify-content: center;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                        </svg>
                        Continue with GitHub
                    </button>
                    
                    <div style="text-align: center; margin: 20px 0; color: #4a5568;">
                        <span>or</span>
                    </div>
                    
                    <button class="btn btn-primary" id="simple-auth-btn" style="justify-content: center;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"/>
                        </svg>
                        Simple Username Login
                    </button>
                </div>
            </div>

            <!-- Simple Auth Form -->
            <div id="simple-auth-form" style="display: none;">
                <form class="auth-form">
                    <div class="form-group">
                        <label for="username-input">Username</label>
                        <input type="text" id="username-input" required minlength="3" maxlength="20" pattern="[a-zA-Z0-9_-]+" placeholder="Enter your username...">
                        <small style="color: #a0aec0; font-size: 0.8em;">
                            3-20 characters, letters, numbers, underscore, and dash only
                        </small>
                    </div>
                    
                    <div style="display: flex; gap: 15px; margin-top: 30px;">
                        <button type="button" class="btn btn-danger" id="back-to-auth-methods" style="flex: 1;">Back</button>
                        <button type="submit" class="btn btn-success" style="flex: 1;">Login</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirm-modal" class="modal">
        <div class="modal-content" style="max-width: 400px;">
            <span class="close" id="confirm-close">&times;</span>
            <div style="text-align: center;">
                <h2 style="color: #ff6b6b; margin-bottom: 20px;">Confirm Action</h2>
                <p id="confirm-message" style="margin-bottom: 30px; color: #e0e0e0;"></p>
                <div style="display: flex; gap: 15px; justify-content: center;">
                    <button class="btn btn-danger" id="confirm-yes">Confirm</button>
                    <button class="btn btn-primary" id="confirm-no">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <div class="status-bar">
        <div class="status-text" id="status-text">Auto-connecting to database...</div>
        <div class="connection-status">
            <div class="status-indicator" id="connection-indicator"></div>
            <span id="connection-text">Connecting...</span>
        </div>
    </div>

    <script>
        class CycleRebornCommunityEditor {
            constructor() {
                // Existing properties
                this.inventory = [];
                this.availableItems = [];
                this.itemConfigs = {};
                this.selectedCategory = 'all';
                this.isConnected = false;
                this.currentFilter = '';
                this.apiBaseUrl = '/api';
                this.autoSaveTimeout = null;
                this.imageCache = new Map();
                this.imageErrors = new Set();
                
                // New community properties
                this.currentUser = null;
                this.isAuthenticated = false;
                this.communityInventories = [];
                this.communityLoadouts = [];
                this.githubToken = null;
                this.currentView = 'inventory';
                
                // Loadout system
                this.loadouts = {
                    1: { name: 'Loadout 1', category: 'stealth', slots: {}, attachments: {} },
                    2: { name: 'Loadout 2', category: 'aggressive', slots: {}, attachments: {} },
                    3: { name: 'Loadout 3', category: 'support', slots: {}, attachments: {} }
                };
                this.currentLoadout = 1;
                this.currentEditingWeapon = null;
                this.attachmentPresets = {};
                
                // Faction levels
                this.factionLevels = {
                    ica: 0,
                    korolev: 0,
                    osiris: 0
                };
                
                // Available tags for community features
                this.availableTags = [
                    'pvp-loadout', 'pve-setup', 'beginner-friendly', 'resource-rich', 
                    'weapon-focus', 'endgame', 'stealth', 'aggressive', 'support', 
                    'exploration', 'sniper', 'close-quarters', 'budget-build', 
                    'high-tier', 'experimental', 'meta'
                ];
                
                // Remote asset URLs
                this.remoteAssetBase = 'https://raw.githubusercontent.com/lxjo101/TheCycleRebornSaveEditor-Assets/main';
                this.remoteConfigUrl = `${this.remoteAssetBase}/itemConfigs.json`;
                this.remoteItemsUrl = `${this.remoteAssetBase}/itemIds.json`;
                this.remoteIconsUrl = `${this.remoteAssetBase}/icons/`;

                this.init();
                this.bindEvents();
            }

            async init() {
                this.updateStatus('Auto-connecting to database...');
                await this.loadItemConfigs();
                await this.loadAvailableItems();
                
                // Initialize window controls if in Electron
                this.initializeWindowControls();
                
                // Initialize update checker if in Electron
                if (window.electronAPI) {
                    this.initializeUpdateChecker();
                }
                
                // Load saved user session
                this.loadUserSession();
                
                // Auto-connect and load
                this.autoConnectAndLoad();
            }

            bindEvents() {
                // Navigation events
                document.querySelectorAll('.nav-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const view = e.target.dataset.view;
                        if (view) {
                            this.switchView(view);
                        }
                    });
                });

                // Category filters
                document.querySelectorAll('.category-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                        this.selectedCategory = e.target.dataset.category;
                        this.renderInventory();
                        this.filterAvailableItems();
                    });
                });

                // Authentication events
                document.getElementById('login-btn').addEventListener('click', () => this.initializeAuth());
                document.getElementById('logout-btn').addEventListener('click', () => this.logout());
                
                // Community events
                document.getElementById('upload-inventory-btn').addEventListener('click', () => this.showUploadModal('inventory'));
                document.getElementById('upload-loadout-btn').addEventListener('click', () => this.showUploadModal('loadout'));
                
                // Loadout editor events
                this.bindLoadoutEvents();
                
                // Faction editor events
                this.bindFactionEvents();
                
                // Existing events
                this.bindExistingEvents();
            }

            switchView(viewName) {
                // Hide all views
                document.querySelectorAll('.view-container').forEach(view => {
                    view.classList.remove('active');
                });
                
                // Remove active class from all nav buttons
                document.querySelectorAll('.nav-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                
                // Show selected view
                const targetView = document.getElementById(`${viewName}-view`);
                if (targetView) {
                    targetView.classList.add('active');
                }
                
                // Activate corresponding nav button
                const navBtn = document.querySelector(`[data-view="${viewName}"]`);
                if (navBtn) {
                    navBtn.classList.add('active');
                }
                
                // Update view title
                const titles = {
                    'inventory': 'Inventory Editor',
                    'community-inventories': 'Community Inventories',
                    'loadout-editor': 'Loadout Editor',
                    'community-loadouts': 'Community Loadouts',
                    'faction-editor': 'Faction Editor'
                };
                
                document.getElementById('current-view-title').textContent = titles[viewName] || 'Save Editor';
                this.currentView = viewName;
                
                // Handle view-specific initialization
                switch (viewName) {
                    case 'community-inventories':
                        this.initializeCommunityInventories();
                        break;
                    case 'community-loadouts':
                        this.initializeCommunityLoadouts();
                        break;
                    case 'loadout-editor':
                        this.initializeLoadoutEditor();
                        break;
                    case 'faction-editor':
                        this.initializeFactionEditor();
                        break;
                }
            }

            // Authentication System
            async initializeAuth() {
                const modal = document.getElementById('auth-modal');
                modal.style.display = 'block';
                
                // Reset modal state
                document.getElementById('auth-method-selection').style.display = 'block';
                document.getElementById('simple-auth-form').style.display = 'none';
                
                // Bind auth events
                document.getElementById('github-auth-btn').addEventListener('click', () => this.authenticateWithGitHub());
                document.getElementById('simple-auth-btn').addEventListener('click', () => this.showSimpleAuth());
                document.getElementById('back-to-auth-methods').addEventListener('click', () => {
                    document.getElementById('auth-method-selection').style.display = 'block';
                    document.getElementById('simple-auth-form').style.display = 'none';
                });
                
                // Simple auth form submission
                document.querySelector('#simple-auth-form form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.authenticateWithUsername();
                });
            }

            showSimpleAuth() {
                document.getElementById('auth-method-selection').style.display = 'none';
                document.getElementById('simple-auth-form').style.display = 'block';
            }

            async authenticateWithGitHub() {
                try {
                    // In a real implementation, this would redirect to GitHub OAuth
                    // For demo purposes, we'll simulate GitHub authentication
                    const mockUser = {
                        username: 'demo_user',
                        avatar: 'https://github.com/identicons/demo_user.png',
                        type: 'github',
                        token: 'mock_github_token'
                    };
                    
                    this.setAuthenticatedUser(mockUser);
                    this.closeModal('auth-modal');
                    this.updateStatus('Authenticated with GitHub successfully');
                } catch (error) {
                    console.error('GitHub authentication error:', error);
                    this.updateStatus('GitHub authentication failed');
                }
            }

            async authenticateWithUsername() {
                const username = document.getElementById('username-input').value.trim();
                
                if (!username || username.length < 3) {
                    this.updateStatus('Username must be at least 3 characters');
                    return;
                }
                
                const user = {
                    username: username,
                    avatar: username.charAt(0).toUpperCase(),
                    type: 'simple',
                    token: null
                };
                
                this.setAuthenticatedUser(user);
                this.closeModal('auth-modal');
                this.updateStatus(`Logged in as ${username}`);
            }

            setAuthenticatedUser(user) {
                this.currentUser = user;
                this.isAuthenticated = true;
                
                // Update UI
                const userProfile = document.getElementById('user-profile');
                const loginBtn = document.getElementById('login-btn');
                const userAvatar = document.getElementById('user-avatar');
                const userName = document.getElementById('user-name');
                
                if (user.type === 'github' && user.avatar) {
                    userAvatar.style.backgroundImage = `url(${user.avatar})`;
                    userAvatar.textContent = '';
                } else {
                    userAvatar.textContent = user.avatar;
                    userAvatar.style.backgroundImage = '';
                }
                
                userName.textContent = user.username;
                userProfile.style.display = 'flex';
                loginBtn.style.display = 'none';
                
                // Show community content
                this.updateCommunityAccess();
                
                // Save session
                this.saveUserSession();
            }

            logout() {
                this.currentUser = null;
                this.isAuthenticated = false;
                
                // Update UI
                const userProfile = document.getElementById('user-profile');
                const loginBtn = document.getElementById('login-btn');
                
                userProfile.style.display = 'none';
                loginBtn.style.display = 'flex';
                
                // Hide community content
                this.updateCommunityAccess();
                
                // Clear session
                localStorage.removeItem('cycleRebornUser');
                
                this.updateStatus('Logged out successfully');
            }

            saveUserSession() {
                if (this.currentUser) {
                    localStorage.setItem('cycleRebornUser', JSON.stringify(this.currentUser));
                }
            }

            loadUserSession() {
                try {
                    const savedUser = localStorage.getItem('cycleRebornUser');
                    if (savedUser) {
                        const user = JSON.parse(savedUser);
                        this.setAuthenticatedUser(user);
                    }
                } catch (error) {
                    console.error('Error loading user session:', error);
                }
            }

            updateCommunityAccess() {
                const inventoriesAuth = document.getElementById('auth-required-inventories');
                const inventoriesContent = document.getElementById('community-inventories-content');
                const loadoutsAuth = document.getElementById('auth-required-loadouts');
                const loadoutsContent = document.getElementById('community-loadouts-content');
                
                if (this.isAuthenticated) {
                    inventoriesAuth.style.display = 'none';
                    inventoriesContent.style.display = 'block';
                    loadoutsAuth.style.display = 'none';
                    loadoutsContent.style.display = 'block';
                } else {
                    inventoriesAuth.style.display = 'block';
                    inventoriesContent.style.display = 'none';
                    loadoutsAuth.style.display = 'block';
                    loadoutsContent.style.display = 'none';
                }
            }

            // Community Inventories System
            async initializeCommunityInventories() {
                if (!this.isAuthenticated) return;
                
                await this.loadCommunityInventories();
                this.bindCommunityInventoryEvents();
            }

            bindCommunityInventoryEvents() {
                // Tag filters
                document.querySelectorAll('#community-inventories-view .filter-tag').forEach(tag => {
                    tag.addEventListener('click', (e) => {
                        document.querySelectorAll('#community-inventories-view .filter-tag').forEach(t => t.classList.remove('active'));
                        e.target.classList.add('active');
                        this.filterCommunityInventories(e.target.dataset.tag);
                    });
                });
                
                // Search
                document.getElementById('search-community-inventories').addEventListener('input', (e) => {
                    this.searchCommunityInventories(e.target.value);
                });
            }

            async loadCommunityInventories() {
                try {
                    // Simulate loading community inventories from GitHub
                    const mockInventories = [
                        {
                            id: 'inv_001',
                            title: 'PvP Domination Build',
                            description: 'High-tier weapons and armor for aggressive PvP encounters',
                            author: 'ProPlayer_2024',
                            tags: ['pvp-loadout', 'high-tier', 'aggressive'],
                            rating: 4.5,
                            downloads: 234,
                            uploadDate: '2024-01-15',
                            items: []
                        },
                        {
                            id: 'inv_002',
                            title: 'Budget Beginner Setup',
                            description: 'Cost-effective items perfect for new players',
                            author: 'HelpfulVet',
                            tags: ['beginner-friendly', 'budget-build', 'pve-setup'],
                            rating: 4.8,
                            downloads: 567,
                            uploadDate: '2024-01-10',
                            items: []
                        },
                        {
                            id: 'inv_003',
                            title: 'Resource Farming Kit',
                            description: 'Optimized for efficient resource collection',
                            author: 'FarmMaster',
                            tags: ['resource-rich', 'exploration', 'pve-setup'],
                            rating: 4.2,
                            downloads: 189,
                            uploadDate: '2024-01-12',
                            items: []
                        }
                    ];
                    
                    this.communityInventories = mockInventories;
                    this.renderCommunityInventories();
                } catch (error) {
                    console.error('Error loading community inventories:', error);
                    this.updateStatus('Failed to load community inventories');
                }
            }

            renderCommunityInventories(inventories = this.communityInventories) {
                const grid = document.getElementById('community-inventories-grid');
                
                if (!inventories.length) {
                    grid.innerHTML = '<div class="loading">No inventories found</div>';
                    return;
                }
                
                grid.innerHTML = '';
                
                inventories.forEach(inventory => {
                    const item = document.createElement('div');
                    item.className = 'community-item';
                    item.innerHTML = `
                        <div class="community-item-header">
                            <div>
                                <h3>${inventory.title}</h3>
                                <div class="community-item-meta">
                                    By ${inventory.author} ‚Ä¢ ${new Date(inventory.uploadDate).toLocaleDateString()}
                                </div>
                            </div>
                            <div class="community-item-rating">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="#ffd700">
                                    <path d="M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.46,13.97L5.82,21L12,17.27Z"/>
                                </svg>
                                ${inventory.rating}
                            </div>
                        </div>
                        
                        <div class="community-item-tags">
                            ${inventory.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                        </div>
                        
                        <div class="community-item-preview">
                            ${inventory.description}
                        </div>
                        
                        <div class="community-item-actions">
                            <button class="btn btn-primary btn-sm" onclick="editor.downloadCommunityInventory('${inventory.id}')">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"/>
                                </svg>
                                Download (${inventory.downloads})
                            </button>
                            <button class="btn btn-success btn-sm" onclick="editor.rateCommunityInventory('${inventory.id}', 1)">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M23,10C23,8.89 22.1,8 21,8H14.68L15.64,3.43C15.66,3.33 15.67,3.22 15.67,3.11C15.67,2.7 15.5,2.32 15.23,2.05L14.17,1L7.59,7.58C7.22,7.95 7,8.45 7,9V19A2,2 0 0,0 9,21H18C18.83,21 19.54,20.5 19.84,19.78L22.86,12.73C22.95,12.5 23,12.26 23,12V10.08L23,10M1,21H5V9H1V21Z"/>
                                </svg>
                                ${inventory.rating > 4 ? 'Liked' : 'Like'}
                            </button>
                        </div>
                    `;
                    
                    grid.appendChild(item);
                });
            }

            filterCommunityInventories(tag) {
                if (tag === 'all') {
                    this.renderCommunityInventories();
                } else {
                    const filtered = this.communityInventories.filter(inv => 
                        inv.tags.includes(tag)
                    );
                    this.renderCommunityInventories(filtered);
                }
            }

            searchCommunityInventories(query) {
                if (!query.trim()) {
                    this.renderCommunityInventories();
                    return;
                }
                
                const filtered = this.communityInventories.filter(inv => 
                    inv.title.toLowerCase().includes(query.toLowerCase()) ||
                    inv.description.toLowerCase().includes(query.toLowerCase()) ||
                    inv.author.toLowerCase().includes(query.toLowerCase())
                );
                
                this.renderCommunityInventories(filtered);
            }

            async downloadCommunityInventory(inventoryId) {
                try {
                    const inventory = this.communityInventories.find(inv => inv.id === inventoryId);
                    if (!inventory) {
                        this.updateStatus('Inventory not found');
                        return;
                    }
                    
                    // Simulate adding items to inventory
                    // In real implementation, this would add the inventory items to current stash
                    this.updateStatus(`Downloaded "${inventory.title}" - adding items to your stash...`);
                    
                    // Update download count
                    inventory.downloads++;
                    this.renderCommunityInventories();
                    
                    setTimeout(() => {
                        this.updateStatus(`Successfully added items from "${inventory.title}" to your inventory`);
                    }, 1500);
                    
                } catch (error) {
                    console.error('Error downloading community inventory:', error);
                    this.updateStatus('Failed to download inventory');
                }
            }

            async rateCommunityInventory(inventoryId, rating) {
                try {
                    const inventory = this.communityInventories.find(inv => inv.id === inventoryId);
                    if (!inventory) return;
                    
                    // Simulate rating update
                    this.updateStatus(`Rated "${inventory.title}" - thank you for your feedback!`);
                } catch (error) {
                    console.error('Error rating inventory:', error);
                }
            }

            // Loadout Editor System
            initializeLoadoutEditor() {
                this.renderCurrentLoadout();
                this.bindLoadoutEvents();
            }

            bindLoadoutEvents() {
                // Loadout tabs
                document.querySelectorAll('.loadout-tab').forEach(tab => {
                    tab.addEventListener('click', (e) => {
                        const loadoutId = e.target.dataset.loadout;
                        if (loadoutId === 'new') {
                            this.createNewLoadout();
                        } else {
                            this.switchLoadout(parseInt(loadoutId));
                        }
                    });
                });
                
                // Loadout slots
                document.querySelectorAll('.loadout-slot').forEach(slot => {
                    slot.addEventListener('click', (e) => {
                        const slotType = e.currentTarget.dataset.slot;
                        if (slotType) {
                            this.openLoadoutItemSelection(slotType);
                        }
                    });
                });
                
                // Loadout controls
                document.getElementById('save-loadout-btn').addEventListener('click', () => this.saveCurrentLoadout());
                document.getElementById('add-items-to-loadout-btn').addEventListener('click', () => this.addItemsToLoadout());
                document.getElementById('clear-loadout-btn').addEventListener('click', () => this.clearCurrentLoadout());
                
                // Loadout name and category changes
                document.getElementById('loadout-name').addEventListener('change', (e) => {
                    this.loadouts[this.currentLoadout].name = e.target.value;
                    this.updateLoadoutTab();
                });
                
                document.getElementById('loadout-category').addEventListener('change', (e) => {
                    this.loadouts[this.currentLoadout].category = e.target.value;
                });
            }

            renderCurrentLoadout() {
                const loadout = this.loadouts[this.currentLoadout];
                
                // Update form fields
                document.getElementById('loadout-name').value = loadout.name;
                document.getElementById('loadout-category').value = loadout.category;
                
                // Update slot displays
                Object.keys(loadout.slots || {}).forEach(slotType => {
                    const slot = document.querySelector(`[data-slot="${slotType}"]`);
                    const item = loadout.slots[slotType];
                    
                    if (slot && item) {
                        const config = this.getItemConfig(item.baseItemId);
                        const iconPath = this.getItemIcon(item.baseItemId);
                        
                        slot.classList.remove('empty');
                        slot.innerHTML = `
                            <div class="loadout-slot-icon" style="background-image: url('${iconPath}')"></div>
                            <div class="loadout-slot-info">
                                <h4>${config.displayName}</h4>
                                <p>Amount: ${item.amount || 1}</p>
                            </div>
                        `;
                    }
                });
            }

            switchLoadout(loadoutId) {
                this.currentLoadout = loadoutId;
                
                // Update active tab
                document.querySelectorAll('.loadout-tab').forEach(tab => {
                    tab.classList.remove('active');
                    if (parseInt(tab.dataset.loadout) === loadoutId) {
                        tab.classList.add('active');
                    }
                });
                
                this.renderCurrentLoadout();
            }

            createNewLoadout() {
                const newId = Object.keys(this.loadouts).length + 1;
                this.loadouts[newId] = {
                    name: `Loadout ${newId}`,
                    category: 'stealth',
                    slots: {},
                    attachments: {}
                };
                
                // Add new tab
                const tabsContainer = document.querySelector('.loadout-tabs');
                const newTab = document.createElement('div');
                newTab.className = 'loadout-tab';
                newTab.dataset.loadout = newId;
                newTab.textContent = `Loadout ${newId}`;
                
                // Insert before the "New" button
                const newButton = document.querySelector('[data-loadout="new"]');
                tabsContainer.insertBefore(newTab, newButton);
                
                this.switchLoadout(newId);
            }

            openLoadoutItemSelection(slotType) {
                // This would open the existing item browser filtered by slot type
                this.currentLoadoutSlot = slotType;
                document.getElementById('available-items-container').style.display = 'block';
                this.filterAvailableItems();
            }

            addItemToLoadout(baseItemId, quantity = 1) {
                if (!this.currentLoadoutSlot) return;
                
                const loadout = this.loadouts[this.currentLoadout];
                loadout.slots[this.currentLoadoutSlot] = {
                    baseItemId: baseItemId,
                    amount: quantity
                };
                
                this.renderCurrentLoadout();
                this.currentLoadoutSlot = null;
            }

            // Weapon Attachment Editor
            showWeaponAttachmentEditor(weaponItem, itemIndex) {
                this.currentEditingWeapon = { item: weaponItem, index: itemIndex };
                
                const editor = document.getElementById('attachment-editor');
                const config = this.getItemConfig(weaponItem.baseItemId);
                
                // Check if it's a marksman weapon to hide muzzle slot
                const isMarksman = config.category === 'marksman' || weaponItem.baseItemId.includes('Marksman');
                const muzzleSlot = document.getElementById('muzzle-slot');
                if (muzzleSlot) {
                    muzzleSlot.style.display = isMarksman ? 'none' : 'block';
                }
                
                // Load current attachments
                this.loadWeaponAttachments(weaponItem);
                
                editor.style.display = 'block';
                this.bindAttachmentEvents();
            }

            bindAttachmentEvents() {
                // Attachment slot clicks
                document.querySelectorAll('.attachment-slot').forEach(slot => {
                    slot.addEventListener('click', (e) => {
                        const attachmentType = e.currentTarget.dataset.attachmentType;
                        if (attachmentType) {
                            this.openAttachmentSelection(attachmentType);
                        }
                    });
                });
                
                // Preset management
                document.getElementById('load-preset-btn').addEventListener('click', () => this.loadAttachmentPreset());
                document.getElementById('save-preset-btn').addEventListener('click', () => this.saveAttachmentPreset());
            }

            loadWeaponAttachments(weaponItem) {
                // Parse weapon's modData to show current attachments
                const modData = weaponItem.modData || { m: [] };
                
                modData.m.forEach(attachment => {
                    const attachmentConfig = this.getItemConfig(attachment.baseItemId);
                    const slot = document.querySelector(`[data-attachment-type="${attachmentConfig.attachment_type}"]`);
                    
                    if (slot) {
                        const iconPath = this.getItemIcon(attachment.baseItemId);
                        slot.classList.remove('empty');
                        slot.querySelector('.attachment-slot-icon').style.backgroundImage = `url('${iconPath}')`;
                        slot.querySelector('.attachment-slot-name').textContent = attachmentConfig.displayName;
                    }
                });
            }

            openAttachmentSelection(attachmentType) {
                this.currentAttachmentType = attachmentType;
                
                // Filter available attachments by type and weapon compatibility
                const compatibleAttachments = this.availableItems.filter(item => {
                    const config = this.getItemConfig(item.baseItemId);
                    return config.attachment_type === attachmentType && 
                           this.isAttachmentCompatible(item.baseItemId, this.currentEditingWeapon.item.baseItemId);
                });
                
                this.renderAttachmentSelection(compatibleAttachments);
                
                const modal = document.getElementById('attachment-selection-modal');
                modal.style.display = 'block';
            }

            isAttachmentCompatible(attachmentId, weaponId) {
                const attachmentConfig = this.getItemConfig(attachmentId);
                const weaponConfig = this.getItemConfig(weaponId);
                
                // Check if attachment is compatible with weapon type
                if (attachmentConfig.attachment_weapon) {
                    return attachmentConfig.attachment_weapon.includes(weaponConfig.category) ||
                           attachmentConfig.attachment_weapon.includes(weaponId);
                }
                
                return true; // Default to compatible if no restrictions
            }

            renderAttachmentSelection(attachments) {
                const grid = document.getElementById('attachment-selection-grid');
                const title = document.getElementById('attachment-selection-title');
                
                title.textContent = `Select ${this.currentAttachmentType.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase())}`;
                
                grid.innerHTML = '';
                
                attachments.forEach(attachment => {
                    const config = this.getItemConfig(attachment.baseItemId);
                    const iconPath = this.getItemIcon(attachment.baseItemId);
                    
                    const item = document.createElement('div');
                    item.className = 'community-item';
                    item.innerHTML = `
                        <div class="available-item-icon rarity-${config.rarity}" style="background-image: url('${iconPath}')"></div>
                        <div class="available-item-info">
                            <h4 class="rarity-${config.rarity}">${config.displayName}</h4>
                            <p style="color: ${this.rarityColors[config.rarity] || '#64ffda'}; font-size: 0.7em; text-transform: uppercase;">${config.rarity}</p>
                        </div>
                        <div class="available-item-controls">
                            <button class="btn btn-primary" onclick="editor.attachToWeapon('${attachment.baseItemId}')">Attach</button>
                        </div>
                    `;
                    
                    grid.appendChild(item);
                });
            }

            attachToWeapon(attachmentId) {
                if (!this.currentEditingWeapon || !this.currentAttachmentType) return;
                
                const weapon = this.currentEditingWeapon.item;
                
                // Initialize modData if it doesn't exist
                if (!weapon.modData) {
                    weapon.modData = { m: [] };
                }
                
                // Remove existing attachment of same type
                weapon.modData.m = weapon.modData.m.filter(att => {
                    const config = this.getItemConfig(att.baseItemId);
                    return config.attachment_type !== this.currentAttachmentType;
                });
                
                // Add new attachment
                weapon.modData.m.push({
                    baseItemId: attachmentId,
                    amount: 1
                });
                
                // Update weapon in inventory
                this.inventory[this.currentEditingWeapon.index] = weapon;
                
                // Refresh displays
                this.loadWeaponAttachments(weapon);
                this.closeModal('attachment-selection-modal');
                this.autoSave();
                
                const config = this.getItemConfig(attachmentId);
                this.updateStatus(`Attached ${config.displayName} to weapon`);
            }

            // Faction Editor System
            initializeFactionEditor() {
                this.loadFactionLevels();
                this.bindFactionEvents();
            }

            bindFactionEvents() {
                // Faction sliders and inputs
                ['ica', 'korolev', 'osiris'].forEach(faction => {
                    const slider = document.getElementById(`${faction}-slider`);
                    const input = document.getElementById(`${faction}-input`);
                    const display = document.getElementById(`${faction}-level-display`);
                    
                    slider.addEventListener('input', (e) => {
                        const value = parseInt(e.target.value);
                        input.value = value;
                        display.textContent = `Level ${value}`;
                        this.factionLevels[faction] = value;
                    });
                    
                    input.addEventListener('change', (e) => {
                        const value = Math.max(0, Math.min(100, parseInt(e.target.value) || 0));
                        slider.value = value;
                        display.textContent = `Level ${value}`;
                        this.factionLevels[faction] = value;
                    });
                });
                
                // Save button
                document.getElementById('save-factions-btn').addEventListener('click', () => this.saveFactionLevels());
            }

            loadFactionLevels() {
                // Load faction levels from save data
                // In real implementation, this would parse faction data from save file
                Object.keys(this.factionLevels).forEach(faction => {
                    const level = this.factionLevels[faction];
                    const slider = document.getElementById(`${faction}-slider`);
                    const input = document.getElementById(`${faction}-input`);
                    const display = document.getElementById(`${faction}-level-display`);
                    
                    if (slider && input && display) {
                        slider.value = level;
                        input.value = level;
                        display.textContent = `Level ${level}`;
                    }
                });
            }

            async saveFactionLevels() {
                try {
                    // In real implementation, this would save faction levels to the save file
                    this.updateStatus('Saving faction levels...');
                    
                    // Simulate save operation
                    setTimeout(() => {
                        this.updateStatus('Faction levels saved successfully');
                    }, 1000);
                    
                } catch (error) {
                    console.error('Error saving faction levels:', error);
                    this.updateStatus('Failed to save faction levels');
                }
            }

            // Community Upload System
            showUploadModal(type) {
                if (!this.isAuthenticated) {
                    this.updateStatus('Please login to upload to community');
                    return;
                }
                
                const modal = document.getElementById('community-upload-modal');
                const title = document.getElementById('upload-modal-title');
                
                title.textContent = type === 'inventory' ? 'Upload Inventory' : 'Upload Loadout';
                this.currentUploadType = type;
                
                // Reset form
                document.getElementById('community-upload-form').reset();
                this.clearSelectedTags();
                
                modal.style.display = 'block';
                this.bindUploadEvents();
            }

            bindUploadEvents() {
                // Tag input
                const tagInput = document.getElementById('tag-input');
                const tagContainer = document.getElementById('tag-input-container');
                const suggestions = document.getElementById('tag-suggestions');
                
                tagInput.addEventListener('input', (e) => {
                    const value = e.target.value.toLowerCase();
                    if (value.length > 0) {
                        const matching = this.availableTags.filter(tag => 
                            tag.includes(value) && !this.getSelectedTags().includes(tag)
                        );
                        this.showTagSuggestions(matching);
                    } else {
                        suggestions.style.display = 'none';
                    }
                });
                
                tagInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ',') {
                        e.preventDefault();
                        this.addTag(e.target.value.trim());
                        e.target.value = '';
                    }
                });
                
                tagContainer.addEventListener('click', () => tagInput.focus());
                
                // Form submission
                document.getElementById('community-upload-form').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.submitCommunityUpload();
                });
                
                document.getElementById('cancel-upload-btn').addEventListener('click', () => {
                    this.closeModal('community-upload-modal');
                });
            }

            showTagSuggestions(suggestions) {
                const container = document.getElementById('tag-suggestions');
                
                if (suggestions.length === 0) {
                    container.style.display = 'none';
                    return;
                }
                
                container.innerHTML = '';
                suggestions.forEach(tag => {
                    const suggestion = document.createElement('div');
                    suggestion.className = 'tag-suggestion';
                    suggestion.textContent = tag;
                    suggestion.addEventListener('click', () => {
                        this.addTag(tag);
                        document.getElementById('tag-input').value = '';
                        container.style.display = 'none';
                    });
                    container.appendChild(suggestion);
                });
                
                container.style.display = 'block';
            }

            addTag(tag) {
                if (!tag || this.getSelectedTags().includes(tag)) return;
                
                const tagContainer = document.getElementById('tag-input-container');
                const tagInput = document.getElementById('tag-input');
                
                const tagElement = document.createElement('div');
                tagElement.className = 'selected-tag';
                tagElement.innerHTML = `
                    ${tag}
                    <span class="tag-remove" onclick="this.parentElement.remove()">√ó</span>
                `;
                
                tagContainer.insertBefore(tagElement, tagInput);
            }

            getSelectedTags() {
                return Array.from(document.querySelectorAll('.selected-tag')).map(tag => 
                    tag.textContent.replace('√ó', '').trim()
                );
            }

            clearSelectedTags() {
                document.querySelectorAll('.selected-tag').forEach(tag => tag.remove());
            }

            async submitCommunityUpload() {
                try {
                    const title = document.getElementById('upload-title').value.trim();
                    const description = document.getElementById('upload-description').value.trim();
                    const category = document.getElementById('upload-category').value;
                    const tags = this.getSelectedTags();
                    
                    if (!title) {
                        this.updateStatus('Please enter a title');
                        return;
                    }
                    
                    const uploadData = {
                        title,
                        description,
                        category,
                        tags,
                        author: this.currentUser.username,
                        type: this.currentUploadType,
                        data: this.currentUploadType === 'inventory' ? this.inventory : this.loadouts[this.currentLoadout],
                        uploadDate: new Date().toISOString()
                    };
                    
                    // In real implementation, this would upload to GitHub
                    this.updateStatus('Uploading to community...');
                    
                    // Simulate upload
                    setTimeout(() => {
                        this.updateStatus(`${this.currentUploadType} uploaded successfully!`);
                        this.closeModal('community-upload-modal');
                    }, 2000);
                    
                } catch (error) {
                    console.error('Error uploading to community:', error);
                    this.updateStatus('Failed to upload to community');
                }
            }

            // Utility Methods
            closeModal(modalId) {
                document.getElementById(modalId).style.display = 'none';
            }

            // Existing methods from original editor...
            // (All the original methods would be preserved here)
            
            bindExistingEvents() {
                // Preserve all original event bindings
                document.getElementById('add-item-btn').addEventListener('click', () => this.toggleAvailableItems());
                document.getElementById('clear-inventory').addEventListener('click', () => this.clearInventory());
                document.getElementById('backup-save').addEventListener('click', () => this.exportBackup());
                document.getElementById('restore-save').addEventListener('click', () => this.importBackup());
            
                // Search
                document.getElementById('search-items').addEventListener('input', (e) => {
                    this.currentFilter = e.target.value.toLowerCase();
                    this.renderInventory();
                    this.filterAvailableItems();
                });
            
                // Modal close events
                document.querySelectorAll('.close').forEach(closeBtn => {
                    closeBtn.addEventListener('click', (e) => {
                        const modal = e.target.closest('.modal');
                        if (modal) {
                            modal.style.display = 'none';
                        }
                    });
                });

                window.addEventListener('click', (e) => {
                    if (e.target.classList.contains('modal')) {
                        e.target.style.display = 'none';
                    }
                });

                // Currency input listeners
                ['aurum-value', 'kmarks-value', 'insurance-value'].forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.addEventListener('change', () => {
                            this.saveBalance();
                        });
                    }
                });

                // Game launcher events
                document.getElementById('launch-game-btn').addEventListener('click', () => this.launchGame());
                document.getElementById('configure-game-btn').addEventListener('click', () => this.configureGamePaths());
            
                // Check if game is configured on startup
                this.checkGameConfiguration();
            }

            // Original methods preserved with enhancements...
            
            async autoConnectAndLoad() {
                try {
                    await this.connectToDatabase();
                    await this.loadInventory();
                } catch (error) {
                    console.error('Auto-connect failed:', error);
                    this.updateStatus('Auto-connect failed - check connection');
                }
            }

            async connectToDatabase() {
                this.updateStatus('Connecting to MongoDB...');
                try {
                    const response = await fetch(`${this.apiBaseUrl}/connect`, {
                        method: 'POST'
                    });
                    
                    const data = await response.json();
                    
                    if (response.ok && data.success) {
                        this.isConnected = true;
                        this.updateConnectionStatus(true);
                        this.updateStatus('Connected successfully');
                        console.log('Connection details:', data);
                    } else {
                        throw new Error(data.message || 'Failed to connect to database');
                    }
                } catch (error) {
                    console.error('Connection error:', error);
                    this.updateStatus(`Connection failed: ${error.message}`);
                    this.updateConnectionStatus(false);
                    throw error;
                }
            }

            async loadItemConfigs() {
                try {
                    console.log(`Loading item configs from: ${this.remoteConfigUrl}`);
                    const response = await fetch(this.remoteConfigUrl);
                    if (response.ok) {
                        const data = await response.json();
                        this.itemConfigs = data.itemConfigs || {};
                        this.rarityColors = data.rarityColors || {};
                        console.log(`‚úÖ Loaded ${Object.keys(this.itemConfigs).length} item configurations from remote`);
                    } else {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                } catch (error) {
                    console.error('Error loading remote item configs:', error);
                    this.createFallbackConfigs();
                }
            }

            async loadAvailableItems() {
                try {
                    console.log(`Loading available items from: ${this.remoteItemsUrl}`);
                    const response = await fetch(this.remoteItemsUrl);
                    if (response.ok) {
                        this.availableItems = await response.json();
                        this.updateStatus('Item database loaded from remote');
                        console.log(`‚úÖ Loaded ${this.availableItems.length} available items from remote`);
                    } else {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                } catch (error) {
                    console.error('Error loading remote available items:', error);
                    this.updateStatus('Warning: Could not load itemIds.json - using fallback data');
                    this.createFallbackItems();
                }
            }

            async loadInventory() {
                this.updateStatus('Loading inventory...');
                try {
                    const response = await fetch(`${this.apiBaseUrl}/inventory`);
                    if (response.ok) {
                        const data = await response.json();
                        
                        if (Array.isArray(data)) {
                            this.inventory = this.splitStacks(data);
                        } else if (data && Array.isArray(data.inventory)) {
                            this.inventory = this.splitStacks(data.inventory);
                        } else {
                            console.warn('Unexpected response format:', data);
                            this.inventory = [];
                        }
                        
                        this.renderInventory();
                        this.updateStatus(`Inventory loaded - ${this.inventory.length} items found`);
                        console.log('Loaded inventory:', this.inventory);

                        this.loadBalance().catch(err => console.warn('Balance loading failed:', err));

                    } else {
                        const errorData = await response.json().catch(() => ({ message: 'Unknown error' }));
                        throw new Error(errorData.message || 'Failed to load inventory');
                    }
                } catch (error) {
                    console.error('Load inventory error:', error);
                    this.updateStatus(`Load failed: ${error.message}`);
                    this.generateEmptyInventory();
                }
            }

            renderInventory() {
                const grid = document.getElementById('inventory-grid');
                grid.innerHTML = '';

                if (!Array.isArray(this.inventory)) {
                    console.warn('Inventory is not an array:', this.inventory);
                    this.inventory = [];
                }

                let filteredInventory = this.inventory.filter(item => {
                    if (!item || !item.baseItemId) return false;
                    
                    const config = this.getItemConfig(item.baseItemId);
                    const matchesCategory = this.selectedCategory === 'all' || config.category === this.selectedCategory;
                    const matchesSearch = !this.currentFilter || 
                        item.baseItemId.toLowerCase().includes(this.currentFilter) ||
                        config.displayName.toLowerCase().includes(this.currentFilter);
                    return matchesCategory && matchesSearch;
                });

                filteredInventory.forEach((item, index) => {
                    const slot = document.createElement('div');
                    slot.className = 'item-slot';
                    
                    const config = this.getItemConfig(item.baseItemId);
                    const iconPath = this.getItemIcon(item.baseItemId);
                    
                    slot.innerHTML = `
                        <div class="item-image rarity-${config.rarity}" style="background-image: url('${iconPath}')"></div>
                        <div class="item-name">${config.displayName}</div>
                        <div class="item-amount">${item.amount || 1}</div>
                    `;
                    
                    slot.addEventListener('click', () => this.showItemDetail(item, this.inventory.indexOf(item)));
                    grid.appendChild(slot);
                });
            }

            showItemDetail(item, index) {
                const modal = document.getElementById('item-detail-modal');
                const detailsDiv = document.getElementById('modal-item-details');
                
                const config = this.getItemConfig(item.baseItemId);
                const iconPath = this.getItemIcon(item.baseItemId);
                const showDurability = config.maxDurability > 0 && config.category !== 'weapons';
                const isWeapon = config.category === 'weapons' || item.baseItemId.includes('WP_');
                
                let durabilitySlider = '';
                if (showDurability) {
                    const currentDurability = item.durability === -1 ? config.maxDurability : item.durability;
                    durabilitySlider = `
                        <div class="durability-slider-container">
                            <label for="durability-slider">Durability: <span class="durability-value">${currentDurability}</span>/${config.maxDurability}</label>
                            <input type="range" id="durability-slider" class="durability-slider" 
                                   min="1" max="${config.maxDurability}" value="${currentDurability}"
                                   oninput="editor.updateDurabilityDisplay(this.value, ${config.maxDurability})">
                        </div>
                    `;
                }
                
                detailsDiv.innerHTML = `
                    <div class="item-detail-icon rarity-${config.rarity}" style="background-image: url('${iconPath}')"></div>
                    <h2 style="color: ${this.rarityColors[config.rarity] || '#64ffda'}; margin-bottom: 20px;">${config.displayName}</h2>
                    <p><strong>Base Item ID:</strong> ${item.baseItemId}</p>
                    <p><strong>Rarity:</strong> <span style="color: ${this.rarityColors[config.rarity] || '#64ffda'}">${config.rarity.charAt(0).toUpperCase() + config.rarity.slice(1)}</span></p>
                    <p><strong>Current Amount:</strong> ${item.amount || 1}</p>
                    ${showDurability ? `<p><strong>Durability:</strong> ${item.durability === -1 ? 'Full' : item.durability}</p>` : ''}
                    <div style="margin-top: 20px;">
                        <label for="edit-quantity">Edit Quantity:</label>
                        <input type="number" id="edit-quantity" class="quantity-input" value="${item.amount || 1}" min="0" max="999" style="margin: 0 10px;">
                        <button class="btn btn-success" onclick="editor.updateItemQuantity(${index}, document.getElementById('edit-quantity').value)">Update</button>
                        <button class="btn btn-danger" onclick="editor.removeItem(${index})" style="margin-left: 10px;">Remove</button>
                    </div>
                    ${durabilitySlider}
                `;
                
                modal.style.display = 'block';
                this.currentEditingItemIndex = index;
                
                // Show weapon attachment editor for weapons
                if (isWeapon) {
                    this.showWeaponAttachmentEditor(item, index);
                } else {
                    document.getElementById('attachment-editor').style.display = 'none';
                }
            }

            toggleAvailableItems() {
                const container = document.getElementById('available-items-container');
                const mainContent = document.getElementById('main-content');
                const isVisible = container.style.display !== 'none';
                
                container.style.display = isVisible ? 'none' : 'block';
                
                if (!isVisible) {
                    this.filterAvailableItems();
                    mainContent.classList.add('hide-scrollbar');
                } else {
                    mainContent.classList.remove('hide-scrollbar');
                }
            }

            filterAvailableItems() {
                const container = document.getElementById('available-items');
                container.innerHTML = '';
                        
                const uniqueItems = [];
                const seenIds = new Set();
                        
                this.availableItems.forEach(item => {
                    if (!seenIds.has(item.baseItemId) && this.itemConfigs[item.baseItemId]) {
                        uniqueItems.push(item);
                        seenIds.add(item.baseItemId);
                    }
                });
            
                let filteredItems = uniqueItems.filter(item => {
                    const config = this.getItemConfig(item.baseItemId);
                    const matchesCategory = this.selectedCategory === 'all' || config.category === this.selectedCategory;
                    const matchesSearch = !this.currentFilter || 
                        config.displayName.toLowerCase().includes(this.currentFilter) ||
                        item.baseItemId.toLowerCase().includes(this.currentFilter);
                    return matchesCategory && matchesSearch;
                });

                filteredItems.forEach(item => {
                    const config = this.getItemConfig(item.baseItemId);
                    const itemDiv = document.createElement('div');
                    itemDiv.className = 'community-item';
                    
                    const iconPath = this.getItemIcon(item.baseItemId);
                    
                    itemDiv.innerHTML = `
                        <div class="available-item-icon rarity-${config.rarity}" style="background-image: url('${iconPath}')"></div>
                        <div class="available-item-info">
                            <h4 class="rarity-${config.rarity}">${config.displayName}</h4>
                            <p style="color: ${this.rarityColors[config.rarity] || '#64ffda'}; font-size: 0.7em; text-transform: uppercase; margin-top: 3px;">${config.rarity}</p>
                        </div>
                        <div class="available-item-controls">
                            <input type="number" class="quantity-input" value="1" min="1" max="999">
                            <button class="btn btn-primary">Add</button>
                        </div>
                    `;
                    
                    const addButton = itemDiv.querySelector('.btn');
                    const quantityInput = itemDiv.querySelector('.quantity-input');
                    
                    addButton.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const quantity = parseInt(quantityInput.value) || 1;
                        
                        // Check if we're adding to loadout or inventory
                        if (this.currentLoadoutSlot) {
                            this.addItemToLoadout(item.baseItemId, quantity);
                        } else {
                            this.addItemToInventory(item.baseItemId, quantity);
                        }
                    });
                    
                    container.appendChild(itemDiv);
                });
            }

            addItemToInventory(baseItemId, quantity) {
                const amount = parseInt(quantity) || 1;
                const config = this.getItemConfig(baseItemId);
                const maxStack = config.maxStackSize || 50;

                let remainingAmount = amount;
                const existingStacks = this.inventory.filter(item => 
                    item.baseItemId === baseItemId && item.amount < maxStack
                );

                for (const existingItem of existingStacks) {
                    if (remainingAmount <= 0) break;
                    const canAdd = maxStack - existingItem.amount;
                    const toAdd = Math.min(remainingAmount, canAdd);
                    existingItem.amount += toAdd;
                    remainingAmount -= toAdd;
                }

                while (remainingAmount > 0) {
                    const stackAmount = Math.min(remainingAmount, maxStack);
                    this.inventory.push({
                        itemId: this.generateUUID(),
                        baseItemId: baseItemId,
                        primaryVanityId: 0,
                        secondaryVanityId: 0,
                        amount: stackAmount,
                        durability: config.maxDurability,
                        modData: { m: [] },
                        rolledPerks: [],
                        insurance: "",
                        insuranceOwnerPlayfabId: "",
                        insuredAttachmentId: "",
                        origin: { t: "", p: "", g: "" }
                    });
                    remainingAmount -= stackAmount;
                }
            
                this.renderInventory();
                this.autoSave();
                this.updateStatus(`Added ${amount}x ${config.displayName} to inventory`);
            }

            // Utility methods
            getItemConfig(baseItemId) {
                if (this.itemConfigs[baseItemId]) {
                    return this.itemConfigs[baseItemId];
                }
                return {
                    displayName: this.cleanDisplayName(baseItemId),
                    category: this.guessCategory(baseItemId),
                    rarity: 'common',
                    maxDurability: this.guessMaxDurability(baseItemId),
                    maxStackSize: this.guessMaxStackSize(baseItemId),
                    icon: this.getDefaultIcon(baseItemId)
                };
            }

            getItemIcon(baseItemId) {
                const config = this.getItemConfig(baseItemId);
                if (config.icon && config.icon !== this.getDefaultIcon(baseItemId)) {
                    return `${this.remoteIconsUrl}${config.icon}`;
                }
                return this.createPlaceholderIcon(baseItemId);
            }

            cleanDisplayName(name) {
                return name
                    .replace(/^(WP_[A-Z]_|TOOL_|Mod_|Consumable_)/g, '')
                    .replace(/_+/g, ' ')
                    .replace(/\b\w+/g, word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())
                    .replace(/\s+/g, ' ')
                    .trim();
            }

            generateUUID() {
                return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                    const r = Math.random() * 16 | 0;
                    const v = c === 'x' ? r : (r & 0x3 | 0x8);
                    return v.toString(16);
                });
            }

            updateStatus(message) {
                document.getElementById('status-text').textContent = message;
                console.log(message);
            }

            updateConnectionStatus(connected) {
                const indicator = document.getElementById('connection-indicator');
                const text = document.getElementById('connection-text');
                
                if (connected) {
                    indicator.classList.add('connected');
                    text.textContent = 'Connected';
                } else {
                    indicator.classList.remove('connected');
                    text.textContent = 'Disconnected';
                }
            }

            async saveInventory() {
                if (!this.isConnected) return;
                try {
                    const response = await fetch(`${this.apiBaseUrl}/inventory`, {
                        method: 'PUT',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(this.inventory)
                    });
                    const data = await response.json();
                    if (response.ok && data.success) {
                        console.log('Auto-saved inventory');
                    }
                } catch (error) {
                    console.error('Save inventory error:', error);
                }
            }

            autoSave() {
                if (this.autoSaveTimeout) {
                    clearTimeout(this.autoSaveTimeout);
                }
                this.autoSaveTimeout = setTimeout(() => {
                    this.saveInventory();
                }, 1000);
            }

            // Initialize window controls and other existing methods...
            initializeWindowControls() {
                if (window.electronAPI && window.electronAPI.windowMinimize) {
                    const controlsContainer = document.getElementById('title-bar-controls');
                    controlsContainer.innerHTML = `
                        <button class="title-bar-button minimize" onclick="window.electronAPI.windowMinimize()">‚àí</button>
                        <button class="title-bar-button maximize" onclick="window.electronAPI.windowMaximize()">‚ñ°</button>
                        <button class="title-bar-button close" onclick="window.electronAPI.windowClose()">√ó</button>
                    `;
                } else {
                    document.querySelector('.custom-title-bar').style.display = 'none';
                    document.querySelector('.container').style.paddingTop = '0';
                    document.querySelector('.sidebar').style.top = '0';
                    document.querySelector('.sidebar').style.height = '100vh';
                }
            }

            initializeUpdateChecker() {
                if (window.electronAPI) {
                    document.getElementById('update-section').style.display = 'block';
                    document.getElementById('check-updates-btn').addEventListener('click', () => {
                        window.electronAPI.checkForUpdates();
                    });
                }
            }

            // Additional required methods for full functionality...
            createFallbackConfigs() {
                this.itemConfigs = {};
                this.rarityColors = {
                    common: '#9e9e9e',
                    uncommon: '#4caf50',
                    rare: '#2196f3',
                    epic: '#9c27b0',
                    exotic: '#ff4e4e',
                    legendary: '#ff9800'
                };
            }

            createFallbackItems() {
                this.availableItems = [
                    { baseItemId: "Consumable_Health_01" },
                    { baseItemId: "Shield_01" },
                    { baseItemId: "WP_E_AR_Energy_01" }
                ];
            }

            guessCategory(baseItemId) {
                const id = baseItemId.toLowerCase();
                if (id.includes('wp_')) return 'weapons';
                if (id.includes('consumable')) return 'consumables';
                if (id.includes('shield') || id.includes('helmet')) return 'armor';
                if (id.includes('light') || id.includes('medium')) return 'ammo';
                if (id.includes('tool')) return 'tools';
                if (id.includes('mod_')) return 'attachments';
                return 'materials';
            }

            guessMaxDurability(baseItemId) {
                const id = baseItemId.toLowerCase();
                if (id.includes('wp_')) return 1000;
                if (id.includes('helmet')) return 600;
                if (id.includes('shield')) return 500;
                return -1;
            }

            guessMaxStackSize(baseItemId) {
                const id = baseItemId.toLowerCase();
                if (id.includes('consumable')) return 5;
                if (id.includes('ammo')) return 250;
                if (id.includes('wp_') || id.includes('helmet')) return 1;
                return 20;
            }

            getDefaultIcon(baseItemId) {
                return `${baseItemId.substring(0, 8)}.png`;
            }

            createPlaceholderIcon(baseItemId) {
                return `data:image/svg+xml;base64,${btoa(`
                    <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 60 60">
                        <rect width="60" height="60" fill="#4a5568"/>
                        <text x="30" y="30" text-anchor="middle" fill="#e0e0e0" font-family="Arial" font-size="6">
                            ${baseItemId.substring(0, 10)}
                        </text>
                    </svg>
                `)}`;
            }

            splitStacks(inventory) {
                const newInventory = [];
                inventory.forEach(item => {
                    const config = this.getItemConfig(item.baseItemId);
                    const maxStack = config.maxStackSize || 50;
                    
                    if (item.amount <= maxStack) {
                        newInventory.push(item);
                    } else {
                        let remainingAmount = item.amount;
                        while (remainingAmount > 0) {
                            const stackAmount = Math.min(remainingAmount, maxStack);
                            newInventory.push({
                                ...item,
                                itemId: this.generateUUID(),
                                amount: stackAmount
                            });
                            remainingAmount -= stackAmount;
                        }
                    }
                });
                return newInventory;
            }

            generateEmptyInventory() {
                this.inventory = [];
                this.renderInventory();
            }

            async loadBalance() {
                try {
                    const response = await fetch(`${this.apiBaseUrl}/balance`);
                    if (response.ok) {
                        const balance = await response.json();
                        document.getElementById('aurum-value').value = balance.AU || 0;
                        document.getElementById('kmarks-value').value = balance.SC || 0;
                        document.getElementById('insurance-value').value = balance.IN || 0;
                    }
                } catch (error) {
                    console.error('Error loading balance:', error);
                }
            }

            async saveBalance() {
                try {
                    const balance = {
                        AU: parseInt(document.getElementById('aurum-value').value) || 0,
                        SC: parseInt(document.getElementById('kmarks-value').value) || 0,
                        IN: parseInt(document.getElementById('insurance-value').value) || 0
                    };
                    await fetch(`${this.apiBaseUrl}/balance`, {
                        method: 'PUT',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(balance)
                    });
                } catch (error) {
                    console.error('Error saving balance:', error);
                }
            }

            // Placeholder methods for game launcher
            async checkGameConfiguration() {}
            async launchGame() {}
            async configureGamePaths() {}
            
            // Additional utility methods
            clearInventory() {}
            exportBackup() {}
            importBackup() {}
            updateItemQuantity() {}
            removeItem() {}
            updateDurabilityDisplay() {}
        }

        // Initialize the enhanced editor
        const editor = new CycleRebornCommunityEditor();

        // Console welcome message
        console.log(`
üéÆ The Cycle: Reborn Save Editor - Community Edition
üåê Community Features: Inventories, Loadouts, Faction Editor
üîß Weapon Attachment Editor
‚öîÔ∏è Advanced Loadout System
üéØ GitHub Integration
üöÄ Auto-Updater Enabled

Features:
- Community inventory sharing
- Advanced loadout editor
- Weapon attachment system
- Faction level editor
- GitHub authentication
- Auto-save functionality

Commands:
- Ctrl+U: Check for updates
- F12: Developer tools
- Ctrl+R: Reload page

Repository: https://github.com/lxjo101/TheCycleRebornEditor
        `);
    </script>
</body>
</html>
                    .initializeAuth()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                        </svg>
                        Login with GitHub
                    </button>
                </div>

                <!-- Community inventories content (shown when authenticated) -->
                <div id="community-inventories-content" style="display: none;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                        <div class="search-container" style="flex: 1; margin-right: 20px; margin-bottom: 0;">
                            <input type="text" class="search-input" id="search-community-inventories" placeholder="Search community inventories...">
                        </div>
                        <button class="btn btn-primary" id="upload-inventory-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                            </svg>
                            Upload Inventory
                        </button>
                    </div>

                    <!-- Tag filters -->
                    <div class="filter-section" style="margin-bottom: 30px;">
                        <h3>Filter by Tags</h3>
                        <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;">
                            <button class="tag filter-tag active" data-tag="all">All</button>
                            <button class="tag filter-tag" data-tag="pvp-loadout">PvP Loadout</button>
                            <button class="tag filter-tag" data-tag="pve-setup">PvE Setup</button>
                            <button class="tag filter-tag" data-tag="beginner-friendly">Beginner Friendly</button>
                            <button class="tag filter-tag" data-tag="resource-rich">Resource Rich</button>
                            <button class="tag filter-tag" data-tag="weapon-focus">Weapon Focus</button>
                            <button class="tag filter-tag" data-tag="endgame">Endgame</button>
                        </div>
                    </div>

                    <!-- Community inventories grid -->
                    <div class="community-grid" id="community-inventories-grid">
                        <div class="loading">
                            <div class="spinner"></div>
                            Loading community inventories...
                        </div>
                    </div>
                </div>
            </div>

            <!-- Loadout Editor View -->
            <div id="loadout-editor-view" class="view-container">
                <div class="loadout-editor">
                    <!-- Loadout Tabs -->
                    <div class="loadout-tabs">
                        <div class="loadout-tab active" data-loadout="1">Loadout 1</div>
                        <div class="loadout-tab" data-loadout="2">Loadout 2</div>
                        <div class="loadout-tab" data-loadout="3">Loadout 3</div>
                        <div class="loadout-tab" data-loadout="new">+ New Loadout</div>
                    </div>

                    <!-- Loadout Controls -->
                    <div style="display: flex; gap: 15px; margin-bottom: 30px; align-items: center;">
                        <input type="text" id="loadout-name" class="search-input" placeholder="Loadout Name" style="flex: 1; margin-bottom: 0;">
                        <select id="loadout-category" class="search-input" style="width: 200px; margin-bottom: 0;">
                            <option value="stealth">Stealth</option>
                            <option value="aggressive">Aggressive</option>
                            <option value="support">Support</option>
                            <option value="exploration">Exploration</option>
                            <option value="sniper">Sniper</option>
                            <option value="close-quarters">Close Quarters</option>
                        </select>
                        <button class="btn btn-success" id="save-loadout-btn">Save Loadout</button>
                        <button class="btn btn-primary" id="add-items-to-loadout-btn">Add Items</button>
                        <button class="btn btn-danger" id="clear-loadout-btn">Clear</button>
                    </div>

                    <!-- Character Loadout Display -->
                    <div class="loadout-character">
                        <!-- Left side slots -->
                        <div class="loadout-slots-left">
                            <div class="loadout-slot empty" data-slot="primary-weapon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z"/>
                                </svg>
                                Primary Weapon
                            </div>
                            <div class="loadout-slot empty" data-slot="helmet">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12,2A9,9 0 0,0 3,11C3,14.03 4.53,16.82 7,18.47V22H9V19H15V22H17V18.47C19.47,16.82 21,14.03 21,11A9,9 0 0,0 12,2M8,11A2,2 0 0,1 10,9A2,2 0 0,1 12,11A2,2 0 0,1 10,13A2,2 0 0,1 8,11M16,11A2,2 0 0,1 14,13A2,2 0 0,1 12,11A2,2 0 0,1 14,9A2,2 0 0,1 16,11Z"/>
                                </svg>
                                Helmet
                            </div>
                            <div class="loadout-slot empty" data-slot="consumable-1">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12,2A3,3 0 0,1 15,5V6.5C15,7.33 14.33,8 13.5,8H12.5C11.67,8 11,7.33 11,6.5V5A3,3 0 0,1 12,2M19,13H18V11H16V13H15V15H16V17H18V15H19V13M12.5,10C14.42,10 16.03,11.19 16.5,12.84C17.69,12.3 19,13.28 19,14.5V15.5C19,16.88 17.88,18 16.5,18H12.5C10.57,18 9,16.43 9,14.5V13.5C9,11.57 10.57,10 12.5,10Z"/>
                                </svg>
                                Consumable Slot 1
                            </div>
                            <div class="loadout-slot empty" data-slot="tool-1">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M22.7,19L13.6,9.9C14.5,7.6 14,4.9 12.1,3C10.1,1 7.1,0.6 4.7,1.7L9,6L6,9L1.6,4.7C0.4,7.1 0.9,10.1 2.9,12.1C4.8,14 7.5,14.5 9.8,13.6L18.9,22.7C19.3,23.1 19.9,23.1 20.3,22.7L22.6,20.4C23.1,20 23.1,19.3 22.7,19Z"/>
                                </svg>
                                Tool Slot 1
                            </div>
                        </div>

                        <!-- Character silhouette -->
                        <div class="loadout-character-silhouette">
                            <svg width="100" height="150" viewBox="0 0 100 150" fill="rgba(100, 255, 218, 0.3)">
                                <path d="M50 10 C40 10, 35 15, 35 25 C35 30, 30 35, 25 40 L25 70 C25 75, 30 80, 35 85 L35 120 C35 125, 40 130, 45 130 L45 145 L55 145 L55 130 C60 130, 65 125, 65 120 L65 85 C70 80, 75 75, 75 70 L75 40 C70 35, 65 30, 65 25 C65 15, 60 10, 50 10 Z"/>
                            </svg>
                        </div>

                        <!-- Right side slots -->
                        <div class="loadout-slots-right">
                            <div class="loadout-slot empty" data-slot="secondary-weapon">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M2,5A2,2 0 0,1 4,3H20A2,2 0 0,1 22,5V19A2,2 0 0,1 20,21H4A2,2 0 0,1 2,19V5M4,5V19H11V18H20V5H4Z"/>
                                </svg>
                                Secondary Weapon
                            </div>
                            <div class="loadout-slot empty" data-slot="armor">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12,2L4,5V11C4,16 7.58,20.68 12,22C16.42,20.68 20,16 20,11V5L12,2M12,7A3,3 0 0,1 15,10A3,3 0 0,1 12,13A3,3 0 0,1 9,10A3,3 0 0,1 12,7Z"/>
                                </svg>
                                Armor
                            </div>
                            <div class="loadout-slot empty" data-slot="consumable-2">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12,2A3,3 0 0,1 15,5V6.5C15,7.33 14.33,8 13.5,8H12.5C11.67,8 11,7.33 11,6.5V5A3,3 0 0,1 12,2M19,13H18V11H16V13H15V15H16V17H18V15H19V13M12.5,10C14.42,10 16.03,11.19 16.5,12.84C17.69,12.3 19,13.28 19,14.5V15.5C19,16.88 17.88,18 16.5,18H12.5C10.57,18 9,16.43 9,14.5V13.5C9,11.57 10.57,10 12.5,10Z"/>
                                </svg>
                                Consumable Slot 2
                            </div>
                            <div class="loadout-slot empty" data-slot="backpack">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M4,9V19A2,2 0 0,0 6,21H18A2,2 0 0,0 20,19V9A2,2 0 0,0 18,7H16V5A4,4 0 0,0 12,1A4,4 0 0,0 8,5V7H6A2,2 0 0,0 4,9M10,5A2,2 0 0,1 12,3A2,2 0 0,1 14,5V7H10V5M6,9H18V19H6V9M8,11V17H10V11H8M14,11V17H16V11H14Z"/>
                                </svg>
                                Backpack
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Community Loadouts View -->
            <div id="community-loadouts-view" class="view-container">
                <!-- Authentication required message -->
                <div id="auth-required-loadouts" class="auth-container">
                    <h2 style="color: #64ffda; text-align: center; margin-bottom: 20px;">Community Loadouts</h2>
                    <p style="text-align: center; margin-bottom: 30px; color: #a0aec0;">
                        Discover optimized loadouts from the community with detailed effectiveness analysis.
                        Login with GitHub to access community features.
                    </p>
                    <button class="btn btn-github" style="width: 100%;" onclick="editor